<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E15T075SB3"></script>
    <script data-cfasync="false">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-E15T075SB3');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-root" content="/book-aspnet-htmx">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.11.0.822742488781">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.11.0">

    <!-- Primary Meta Tags -->
    <title>Debugging htmx Applications</title>
    <meta name="title" content="Debugging htmx Applications">
    <meta name="description" content="When an htmx application works, it feels like magic. Partial updates flow smoothly, the page responds instantly, and users never see a loading screen.">

    <!-- Canonical -->
    <link rel="canonical" href="https://cwoodruff.github.io/book-aspnet-htmx/chapter21/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cwoodruff.github.io/book-aspnet-htmx/chapter21/">
    <meta property="og:title" content="Debugging htmx Applications">
    <meta property="og:description" content="When an htmx application works, it feels like magic. Partial updates flow smoothly, the page responds instantly, and users never see a loading screen.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://cwoodruff.github.io/book-aspnet-htmx/chapter21/">
    <meta property="twitter:title" content="Debugging htmx Applications">
    <meta property="twitter:description" content="When an htmx application works, it feels like magic. Partial updates flow smoothly, the page responds instantly, and users never see a loading screen.">

    <script data-cfasync="false">(function(){var cl=document.documentElement.classList,ls=localStorage.getItem("retype_scheme"),hd=cl.contains("dark"),hl=cl.contains("light"),wm=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;if(ls==="dark"||(!ls&&wm&&!hd&&!hl)){cl.remove("light");cl.add("dark")}else if(ls==="light"||(!ls&&!wm&&!hd&&!hl)){cl.remove("dark");cl.add("light")}})();</script>

    <link href="../images/favicon.png" rel="icon">
    <link href="../resources/css/retype.css?v=3.11.0.822742488781" rel="stylesheet">

    <script data-cfasync="false" src="../resources/js/config.js?v=3.11.0.822742488781" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../resources/js/retype.js?v=3.11.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../resources/js/lunr.js?v=3.11.0.822742488781" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../resources/js/prism.js?v=3.11.0.822742488781" defer></script>
</head>
<body>
    <div id="retype-app" class="relative text-base antialiased text-base-text bg-base-bg font-body">
        <div class="absolute bottom-0 left-0" style="top: 5rem; right: 50%"></div>
    
        <header id="retype-header" class="sticky top-0 z-30 flex w-full h-16 bg-header-bg border-b border-header-border md:h-20">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton retype-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="retype-sidebar-left-toggle-button"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="retype-branding-logo" href="../" class="flex items-center leading-snug text-xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../images/network200.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../images/network200.png">
                            </span>
                            <span class="dark:text-white font-bold line-clamp-1 md:line-clamp-2">ASP.NET Core Reimagined with htmx</span>
                        </a><span id="retype-branding-label" class="inline-flex mt-1 px-2 py-1 ml-4 text-xs font-medium leading-none items-center rounded-md bg-branding-label-bg text-branding-label-text ring-1 ring-branding-label-border ring-inset md:inline-block">v1</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block border-base-border"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav id="retype-header-nav" class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="../">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                        </g>
                                    </svg>
                                    <span>Home</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/cwoodruff/book-aspnet-htmx/issues" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                        </g>
                                    </svg>
                                    <span>Issues</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://bsky.app/profile/woodruff.dev" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M18.231,3.618c-2.312,1.736-4.785,5.107-5.948,7.244c-0.123,0.226-0.444,0.226-0.567,0	c-1.163-2.137-3.636-5.508-5.948-7.244C3.949,2.252,1,1.195,1,4.559c0,0.672,0.385,5.643,0.611,6.451	c0.606,2.169,2.454,3.089,4.437,3.195c0.19,0.01,0.222,0.261,0.043,0.324c-2.988,1.048-3.518,3.196-1.424,5.344	c3.826,3.894,5.814,0.647,6.733-1.514c0.224-0.525,0.977-0.525,1.2,0c0.92,2.161,2.907,5.408,6.733,1.514	c2.093-2.148,1.564-4.296-1.424-5.344c-0.179-0.063-0.146-0.313,0.043-0.324c1.983-0.106,3.83-1.026,4.437-3.195	C22.615,10.203,23,5.231,23,4.559C23,1.195,20.051,2.252,18.231,3.618z"></path>
                                        </g>
                                    </svg>
                                    <span>Bluesky</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://mastodon.social/@cwoodruff" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a4 4 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522q0-1.288.66-2.046c.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764q.662.757.661 2.046z"/>
                                        </g>
                                    </svg>
                                    <span>Mastodon</span>
                                </a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-search-placeholder transition-colors duration-200 ease-in bg-search-bg border border-transparent rounded md:text-sm hover:border-search-border-hover focus:outline-none focus:border-search-border-focus" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="retype-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
    
        <div id="retype-container" class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-sidebar-left-bg border-sidebar-left-border sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton">
            
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-filter-bg border border-filter-border rounded shadow-none text-sm focus:outline-none focus:border-filter-border-focus" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-base-border">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-350 dark:text-dark-400 hover:text-gray-600 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-base-border">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-base-border">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="../">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                                </g>
                                            </svg>
                                            <span>Home</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/cwoodruff/book-aspnet-htmx/issues" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                                </g>
                                            </svg>
                                            <span>Issues</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://bsky.app/profile/woodruff.dev" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M18.231,3.618c-2.312,1.736-4.785,5.107-5.948,7.244c-0.123,0.226-0.444,0.226-0.567,0	c-1.163-2.137-3.636-5.508-5.948-7.244C3.949,2.252,1,1.195,1,4.559c0,0.672,0.385,5.643,0.611,6.451	c0.606,2.169,2.454,3.089,4.437,3.195c0.19,0.01,0.222,0.261,0.043,0.324c-2.988,1.048-3.518,3.196-1.424,5.344	c3.826,3.894,5.814,0.647,6.733-1.514c0.224-0.525,0.977-0.525,1.2,0c0.92,2.161,2.907,5.408,6.733,1.514	c2.093-2.148,1.564-4.296-1.424-5.344c-0.179-0.063-0.146-0.313,0.043-0.324c1.983-0.106,3.83-1.026,4.437-3.195	C22.615,10.203,23,5.231,23,4.559C23,1.195,20.051,2.252,18.231,3.618z"></path>
                                                </g>
                                            </svg>
                                            <span>Bluesky</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://mastodon.social/@cwoodruff" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a4 4 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522q0-1.288.66-2.046c.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764q.662.757.661 2.046z"/>
                                                </g>
                                            </svg>
                                            <span>Mastodon</span>
                                        </a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-350 dark:text-dark-400 hover:text-gray-600 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 bg-body-bg">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div id="retype-main" class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="retype-markdown" id="retype-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="retype-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="debugging-htmx-applications" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-htmx-applications">#</doc-anchor-trigger>
        <span>Debugging htmx Applications</span>
    </h1>
</doc-anchor-target>
<p>When an htmx application works, it feels like magic. Partial updates flow smoothly, the page responds instantly, and users never see a loading screen. When something breaks, that same magic becomes a mystery. Where did the request go? Why didn&#x27;t the content update? What happened to my data?</p>
<p>Debugging htmx applications requires different techniques than traditional web development. This chapter provides the tools and methods to diagnose and fix htmx issues quickly and systematically.</p>
<doc-anchor-target id="211-introduction">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#211-introduction">#</doc-anchor-trigger>
        <span>21.1 Introduction</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="why-debugging-htmx-differs-from-traditional-web-apps">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#why-debugging-htmx-differs-from-traditional-web-apps">#</doc-anchor-trigger>
        <span>Why Debugging htmx Differs from Traditional Web Apps</span>
    </h3>
</doc-anchor-target>
<p>Traditional web applications follow a predictable pattern: user clicks a link, browser sends a request, server returns a complete page, browser renders it. When something goes wrong, you see an error page or a blank screen. The failure is visible.</p>
<p>htmx operates differently. Requests happen in the background. Responses replace portions of the page rather than the whole thing. State exists simultaneously on the server (in session, database, or handler properties) and in the browser&#x27;s DOM. A failure might mean nothing visible happens at all, which is harder to diagnose than an obvious error.</p>
<p>Several characteristics make htmx debugging unique:</p>
<p><strong>Invisible Updates</strong>: When you click a button and nothing happens, was the request sent? Did the server respond? Did the response reach the right element? Traditional page loads answer these questions automatically. With htmx, you need to investigate each step.</p>
<p><strong>Partial Responses</strong>: The server returns HTML fragments, not complete pages. If the fragment is malformed, targets the wrong element, or includes unexpected content, the visible result may be confusing or absent.</p>
<p><strong>Dual State</strong>: Your application state lives in two places. The server knows what data exists. The browser&#x27;s DOM reflects what the user sees. These can fall out of sync if updates fail partway through, if OOB swaps miss their targets, or if the user navigates with the back button.</p>
<p><strong>Event Timing</strong>: htmx operations are asynchronous. A fast typist might trigger multiple search requests. A slow network might deliver responses out of order. Debouncing and request cancellation help, but timing issues can still cause unexpected behavior.</p>
<p><strong>Attribute-Driven Behavior</strong>: htmx behavior comes from HTML attributes, not JavaScript code. A typo in an attribute name silently fails. An incorrect selector in <code v-pre>hx-target</code> sends content to the wrong place without throwing an error.</p>
<doc-anchor-target id="common-categories-of-htmx-issues">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-categories-of-htmx-issues">#</doc-anchor-trigger>
        <span>Common Categories of htmx Issues</span>
    </h3>
</doc-anchor-target>
<p>Most htmx problems fall into a few categories:</p>
<p><strong>Configuration Errors</strong>: Typos in attribute names (<code v-pre>hx-triger</code> instead of <code v-pre>hx-trigger</code>), incorrect handler names in URLs, missing htmx.js include, wrong attribute values.</p>
<p><strong>Server Response Problems</strong>: Handler returns full page instead of partial, wrong content type, partial view not found, server error (500), authentication redirect (302).</p>
<p><strong>Targeting Failures</strong>: Target element doesn&#x27;t exist, selector matches wrong element, element ID changed after previous swap, OOB target missing.</p>
<p><strong>Event and Timing Issues</strong>: Trigger never fires, events fire too often, request cancellation causes unexpected behavior, debounce timing wrong.</p>
<p><strong>Anti-Forgery Token Problems</strong>: Token not included in request, token expired, token mismatch between form and handler.</p>
<p><strong>History and URL State</strong>: Back button shows stale content, URL doesn&#x27;t reflect current state, history cache serves outdated responses.</p>
<doc-anchor-target id="what-this-chapter-covers">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#what-this-chapter-covers">#</doc-anchor-trigger>
        <span>What This Chapter Covers</span>
    </h3>
</doc-anchor-target>
<p>This chapter provides systematic approaches to debugging each category of issue. You&#x27;ll learn to use browser developer tools effectively for htmx requests, use htmx&#x27;s built-in debugging features, implement server-side logging for htmx requests in ASP.NET Core, diagnose common problems with proven solutions, and build a systematic debugging workflow.</p>
<p>The examples use the Chinook Dashboard from Chapter 21. If you haven&#x27;t built that project, the techniques still apply to any htmx application.</p>
<hr>
<doc-anchor-target id="212-browser-developer-tools-for-htmx">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#212-browser-developer-tools-for-htmx">#</doc-anchor-trigger>
        <span>21.2 Browser Developer Tools for htmx</span>
    </h2>
</doc-anchor-target>
<p>Browser developer tools are your primary debugging interface. Chrome, Firefox, and Edge all provide similar capabilities. This section focuses on Chrome DevTools, but the concepts transfer to other browsers.</p>
<doc-anchor-target id="2121-network-tab-essentials">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2121-network-tab-essentials">#</doc-anchor-trigger>
        <span>21.2.1 Network Tab Essentials</span>
    </h3>
</doc-anchor-target>
<p>The Network tab shows every request the browser makes. For htmx debugging, you need to filter and interpret these requests effectively.</p>
<doc-anchor-target id="opening-the-network-tab">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#opening-the-network-tab">#</doc-anchor-trigger>
        <span>Opening the Network Tab</span>
    </h4>
</doc-anchor-target>
<p>Press F12 to open DevTools, then click the Network tab. Check &quot;Preserve log&quot; to keep requests visible across navigations. For htmx work, filter to &quot;Fetch/XHR&quot; to hide CSS, images, and other resource requests.</p>
<doc-anchor-target id="identifying-htmx-requests">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#identifying-htmx-requests">#</doc-anchor-trigger>
        <span>Identifying htmx Requests</span>
    </h4>
</doc-anchor-target>
<p>htmx adds an <code v-pre>HX-Request: true</code> header to every request it makes. This header distinguishes htmx requests from regular browser navigation or other JavaScript fetch calls.</p>
<p>In the Network tab, click on any request to see its details. Under the Headers section, look for Request Headers. htmx requests include:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">HX-Request: true
HX-Current-URL: https://localhost:5001/Artists
HX-Target: artist-list
HX-Trigger: search-input</code></pre>
</doc-codeblock></div>
<p>These headers tell you:</p>
<ul>
<li><code v-pre>HX-Request</code>: Confirms this is an htmx request</li>
<li><code v-pre>HX-Current-URL</code>: The page URL when the request was made</li>
<li><code v-pre>HX-Target</code>: The ID of the element that will receive the response (without the # prefix)</li>
<li><code v-pre>HX-Trigger</code>: The ID of the element that triggered the request</li>
</ul>
<p>If you don&#x27;t see the <code v-pre>HX-Request</code> header, the request wasn&#x27;t made by htmx. Check that htmx.js is loaded and the element has proper htmx attributes.</p>
<doc-anchor-target id="reading-response-headers">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reading-response-headers">#</doc-anchor-trigger>
        <span>Reading Response Headers</span>
    </h4>
</doc-anchor-target>
<p>The server can send instructions back to htmx through response headers:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">HX-Redirect: /Login
HX-Refresh: true
HX-Trigger: showToast
HX-Trigger-After-Swap: refreshStats
HX-Push-Url: /Artists?search=acdc</code></pre>
</doc-codeblock></div>
<p>These headers control behavior after the response arrives:</p>
<ul>
<li><code v-pre>HX-Redirect</code>: Forces a full page redirect</li>
<li><code v-pre>HX-Refresh</code>: Triggers a full page refresh</li>
<li><code v-pre>HX-Trigger</code>: Fires a custom event on the target element</li>
<li><code v-pre>HX-Trigger-After-Swap</code>: Fires after the swap completes</li>
<li><code v-pre>HX-Push-Url</code>: Updates the browser URL</li>
</ul>
<p>Check response headers when htmx behaves unexpectedly after receiving a response. An <code v-pre>HX-Redirect</code> from an authentication handler, for example, might explain why your partial update instead triggers a full page load.</p>
<doc-anchor-target id="inspecting-response-content">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inspecting-response-content">#</doc-anchor-trigger>
        <span>Inspecting Response Content</span>
    </h4>
</doc-anchor-target>
<p>Click the Response or Preview tab to see what the server returned. For htmx partials, you should see an HTML fragment, not a complete page with <code v-pre>&lt;!DOCTYPE html&gt;</code> and <code v-pre>&lt;html&gt;</code> tags.</p>
<p>If you see a full HTML page, your handler is returning <code v-pre>Page()</code> instead of <code v-pre>Partial()</code>, or your partial view is somehow pulling in the layout. This is a common issue covered in detail in Section 21.4.2.</p>
<p>Check the response status code as well:</p>
<ul>
<li><strong>200</strong>: Success, response should be swapped</li>
<li><strong>204</strong>: Success, no content (htmx does nothing)</li>
<li><strong>400</strong>: Bad request (often anti-forgery token issues)</li>
<li><strong>404</strong>: Handler or page not found</li>
<li><strong>500</strong>: Server error</li>
</ul>
<doc-anchor-target id="demo-debugging-a-404-handler-not-found">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-debugging-a-404-handler-not-found">#</doc-anchor-trigger>
        <span>Demo: Debugging a 404 Handler Not Found</span>
    </h4>
</doc-anchor-target>
<p>Let&#x27;s walk through a real debugging scenario. You have an Edit button on an artist row:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button hx-get=&quot;/Artists?handler=Editt&amp;id=1&quot;
        hx-target=&quot;#artist-row-1&quot;
        hx-swap=&quot;outerHTML&quot;&gt;
    Edit
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>You click the button. Nothing happens. Here&#x27;s how to diagnose it:</p>
<p><strong>Step 1: Open Network Tab</strong></p>
<p>Press F12, select Network, filter to Fetch/XHR.</p>
<p><strong>Step 2: Click the Button Again</strong></p>
<p>Watch for a new request to appear.</p>
<p><strong>Step 3: Examine the Request</strong></p>
<p>You see a request to <code v-pre>/Artists?handler=Editt&amp;id=1</code>. The status code is 404.</p>
<p><strong>Step 4: Identify the Problem</strong></p>
<p>The handler name is <code v-pre>Editt</code> with two t&#x27;s. The actual handler in your PageModel is <code v-pre>OnGetEditAsync</code>, which maps to <code v-pre>handler=Edit</code>.</p>
<p><strong>Step 5: Fix and Verify</strong></p>
<p>Change the button:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button hx-get=&quot;/Artists?handler=Edit&amp;id=1&quot;
        hx-target=&quot;#artist-row-1&quot;
        hx-swap=&quot;outerHTML&quot;&gt;
    Edit
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>Refresh and test. The request now returns 200 and the edit form appears.</p>
<p>This pattern applies to any &quot;nothing happens&quot; scenario: open Network, trigger the action, check the status code, examine the URL and response.</p>
<doc-anchor-target id="2122-console-tab-for-errors-and-events">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2122-console-tab-for-errors-and-events">#</doc-anchor-trigger>
        <span>21.2.2 Console Tab for Errors and Events</span>
    </h3>
</doc-anchor-target>
<p>The Console tab displays JavaScript errors and log output. htmx and Hyperscript both report errors here.</p>
<doc-anchor-target id="javascript-console-errors">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#javascript-console-errors">#</doc-anchor-trigger>
        <span>JavaScript Console Errors</span>
    </h4>
</doc-anchor-target>
<p>When htmx encounters a problem it can detect, it logs to the console. Common errors include:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">htmx: could not find target with selector &quot;#nonexistent&quot;</code></pre>
</doc-codeblock></div>
<p>This means <code v-pre>hx-target</code> specified an element that doesn&#x27;t exist in the DOM.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">htmx: response error : 404 from /Artists?handler=Wrong</code></pre>
</doc-codeblock></div>
<p>The server returned an error status code.</p>
<p>Hyperscript also reports parsing errors:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">_hyperscript: syntax error at line 1: unexpected token 'documnet'</code></pre>
</doc-codeblock></div>
<p>This indicates a typo in your Hyperscript code.</p>
<p>Always check the Console tab when something doesn&#x27;t work. Many issues produce explicit error messages.</p>
<doc-anchor-target id="using-htmxlogall-for-verbose-logging">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#using-htmxlogall-for-verbose-logging">#</doc-anchor-trigger>
        <span>Using htmx.logAll() for Verbose Logging</span>
    </h4>
</doc-anchor-target>
<p>htmx can log every event it processes. This verbose output helps understand the sequence of operations:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">htmx.logAll();</code></pre>
</doc-codeblock></div>
<p>Run this in the Console tab, then trigger an htmx action. You&#x27;ll see output like:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">htmx:configRequest {verb: 'get', path: '/Artists?handler=List', elt: button, ...}
htmx:beforeRequest {verb: 'get', path: '/Artists?handler=List', ...}
htmx:afterRequest {verb: 'get', path: '/Artists?handler=List', successful: true, ...}
htmx:beforeSwap {target: div#artist-list, serverResponse: '&lt;table&gt;...', ...}
htmx:afterSwap {target: div#artist-list, ...}
htmx:afterSettle {target: div#artist-list, ...}</code></pre>
</doc-codeblock></div>
<p>This shows the complete lifecycle: configuring the request, sending it, receiving the response, swapping content, and settling (running scripts in the new content).</p>
<p>If something fails, the chain breaks at a specific point. No <code v-pre>htmx:beforeRequest</code>? The trigger didn&#x27;t fire. No <code v-pre>htmx:afterRequest</code>? The request failed. No <code v-pre>htmx:afterSwap</code>? The swap failed, possibly due to a missing target.</p>
<doc-anchor-target id="custom-console-logging">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#custom-console-logging">#</doc-anchor-trigger>
        <span>Custom Console Logging</span>
    </h4>
</doc-anchor-target>
<p>For ongoing debugging, add event listeners that log specific information:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Log all htmx requests with their details
document.body.addEventListener('htmx:configRequest', function(event) {
    console.log('htmx request:', {
        method: event.detail.verb.toUpperCase(),
        path: event.detail.path,
        target: event.detail.target?.id || '(no target)',
        trigger: event.detail.triggeringEvent?.target?.id || '(unknown trigger)'
    });
});

// Log successful swaps
document.body.addEventListener('htmx:afterSwap', function(event) {
    console.log('htmx swapped:', {
        target: event.detail.target?.id || event.detail.target,
        path: event.detail.pathInfo?.requestPath,
        responseSize: event.detail.xhr?.responseText?.length || 0
    });
});

// Log errors prominently
document.body.addEventListener('htmx:responseError', function(event) {
    console.error('htmx ERROR:', {
        status: event.detail.xhr?.status,
        statusText: event.detail.xhr?.statusText,
        path: event.detail.pathInfo?.requestPath
    });
});</code></pre>
</doc-codeblock></div>
<p>Add these to your <code v-pre>site.js</code> file during development. They provide a running commentary of htmx activity without the noise of <code v-pre>htmx.logAll()</code>.</p>
<doc-anchor-target id="2123-elements-tab-for-dom-inspection">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2123-elements-tab-for-dom-inspection">#</doc-anchor-trigger>
        <span>21.2.3 Elements Tab for DOM Inspection</span>
    </h3>
</doc-anchor-target>
<p>The Elements tab shows the current state of the DOM. Use it to verify htmx attributes and watch for changes.</p>
<doc-anchor-target id="inspecting-htmx-attributes">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inspecting-htmx-attributes">#</doc-anchor-trigger>
        <span>Inspecting htmx Attributes</span>
    </h4>
</doc-anchor-target>
<p>Right-click any element and select &quot;Inspect&quot; to jump to it in the Elements tab. Expand the element to see its attributes:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button class=&quot;btn btn-primary&quot;
        hx-get=&quot;/Artists?handler=Edit&amp;amp;id=1&quot;
        hx-target=&quot;#artist-row-1&quot;
        hx-swap=&quot;outerHTML&quot;
        hx-indicator=&quot;#loading-spinner&quot;&gt;
    Edit
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>Verify each attribute:</p>
<ul>
<li>Is <code v-pre>hx-get</code> pointing to the correct URL?</li>
<li>Does the <code v-pre>hx-target</code> selector match an existing element?</li>
<li>Is the <code v-pre>hx-swap</code> value what you expect?</li>
</ul>
<p>You can edit attributes directly in the Elements tab to test fixes before changing your code. Double-click an attribute value to modify it, then trigger the action again.</p>
<doc-anchor-target id="using-break-on-subtree-modifications">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#using-break-on-subtree-modifications">#</doc-anchor-trigger>
        <span>Using &quot;Break on Subtree Modifications&quot;</span>
    </h4>
</doc-anchor-target>
<p>When content changes unexpectedly, you can set a breakpoint that triggers whenever an element&#x27;s children change:</p>
<ol>
<li>Right-click the element in the Elements tab</li>
<li>Select &quot;Break on&quot; â†’ &quot;subtree modifications&quot;</li>
<li>Trigger the htmx action</li>
</ol>
<p>The debugger pauses when the DOM changes, showing you the call stack that caused the modification. This helps identify which swap or JavaScript code is modifying the element.</p>
<doc-anchor-target id="testing-css-selectors-in-console">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#testing-css-selectors-in-console">#</doc-anchor-trigger>
        <span>Testing CSS Selectors in Console</span>
    </h4>
</doc-anchor-target>
<p>If an <code v-pre>hx-target</code> selector isn&#x27;t working, test it in the Console:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Test if the selector finds anything
document.querySelector('#artist-row-1')

// Returns the element or null if not found

// Test more complex selectors
document.querySelector('closest tr')  // This won't work - closest is htmx syntax

// For closest, you need:
document.querySelector('button').closest('tr')  // Find button's parent row</code></pre>
</doc-codeblock></div>
<p>Note that htmx supports special selectors like <code v-pre>closest</code>, <code v-pre>find</code>, <code v-pre>next</code>, and <code v-pre>previous</code> that aren&#x27;t standard CSS. You can&#x27;t test these directly with <code v-pre>querySelector</code>, but you can test the underlying CSS selector.</p>
<doc-anchor-target id="demo-element-not-found-after-swap">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-element-not-found-after-swap">#</doc-anchor-trigger>
        <span>Demo: Element Not Found After Swap</span>
    </h4>
</doc-anchor-target>
<p>Consider this scenario: clicking Edit works the first time, but the second click does nothing.</p>
<p><strong>The Setup:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;tr id=&quot;artist-row-1&quot;&gt;
    &lt;td&gt;AC/DC&lt;/td&gt;
    &lt;td&gt;
        &lt;button hx-get=&quot;/Artists?handler=Edit&amp;id=1&quot;
                hx-target=&quot;#artist-row-1&quot;
                hx-swap=&quot;outerHTML&quot;&gt;
            Edit
        &lt;/button&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p>The handler returns an edit form that replaces the entire row:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;tr id=&quot;artist-edit-1&quot;&gt;
    &lt;td colspan=&quot;2&quot;&gt;
        &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=1&quot;
              hx-target=&quot;#artist-edit-1&quot;
              hx-swap=&quot;outerHTML&quot;&gt;
            &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
            &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;
            &lt;button type=&quot;button&quot; 
                    hx-get=&quot;/Artists?handler=Cancel&amp;id=1&quot;
                    hx-target=&quot;#artist-row-1&quot;&gt;
                Cancel
            &lt;/button&gt;
        &lt;/form&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p><strong>The Problem:</strong></p>
<p>The Cancel button targets <code v-pre>#artist-row-1</code>, but that element no longer exists. It was replaced by <code v-pre>#artist-edit-1</code>.</p>
<p><strong>Debugging Steps:</strong></p>
<ol>
<li>Open Elements tab after clicking Edit</li>
<li>Search for <code v-pre>artist-row-1</code> - not found</li>
<li>The swap with <code v-pre>outerHTML</code> replaced the element, changing its ID</li>
</ol>
<p><strong>The Fix:</strong></p>
<p>Use a consistent ID, or target a stable container:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Option 1: Keep the same ID --&gt;
&lt;tr id=&quot;artist-row-1&quot;&gt;
    &lt;td colspan=&quot;2&quot;&gt;
        &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=1&quot;
              hx-target=&quot;#artist-row-1&quot;
              hx-swap=&quot;outerHTML&quot;&gt;
            &lt;!-- form content --&gt;
        &lt;/form&gt;
    &lt;/td&gt;
&lt;/tr&gt;

&lt;!-- Option 2: Target a stable container --&gt;
&lt;button type=&quot;button&quot;
        hx-get=&quot;/Artists?handler=Cancel&amp;id=1&quot;
        hx-target=&quot;closest tr&quot;
        hx-swap=&quot;outerHTML&quot;&gt;
    Cancel
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>This scenario illustrates why the Elements tab matters: it shows the actual DOM state, which might differ from what your code expects.</p>
<hr>
<doc-anchor-target id="213-htmx-built-in-debugging-features">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#213-htmx-built-in-debugging-features">#</doc-anchor-trigger>
        <span>21.3 htmx Built-in Debugging Features</span>
    </h2>
</doc-anchor-target>
<p>htmx includes several features specifically designed for debugging. These work alongside browser DevTools to provide deeper insight into htmx behavior.</p>
<doc-anchor-target id="2131-the-htmxlogall-method">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2131-the-htmxlogall-method">#</doc-anchor-trigger>
        <span>21.3.1 The htmx.logAll() Method</span>
    </h3>
</doc-anchor-target>
<p>The <code v-pre>htmx.logAll()</code> method enables verbose logging of all htmx events. This creates detailed output that traces every step of htmx processing.</p>
<doc-anchor-target id="enabling-in-development-only">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#enabling-in-development-only">#</doc-anchor-trigger>
        <span>Enabling in Development Only</span>
    </h4>
</doc-anchor-target>
<p>You don&#x27;t want verbose logging in production. Use ASP.NET Core&#x27;s environment detection to enable it conditionally:</p>
<p><strong>In _Layout.cshtml:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@inject IWebHostEnvironment Environment

&lt;!-- htmx and Hyperscript --&gt;
&lt;script src=&quot;~/lib/htmx/htmx.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;~/lib/hyperscript/_hyperscript.min.js&quot;&gt;&lt;/script&gt;

@if (Environment.IsDevelopment())
{
    &lt;script&gt;
        // Enable verbose htmx logging in development
        htmx.logAll();
        console.log('%chtmx debug mode enabled', 'color: #3b82f6; font-weight: bold;');
    &lt;/script&gt;
}</code></pre>
</doc-codeblock></div>
<p>Now logging activates automatically during development but stays off in production.</p>
<doc-anchor-target id="understanding-event-lifecycle-output">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#understanding-event-lifecycle-output">#</doc-anchor-trigger>
        <span>Understanding Event Lifecycle Output</span>
    </h4>
</doc-anchor-target>
<p>With <code v-pre>logAll()</code> enabled, triggering an htmx action produces output like this:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">htmx:configRequest
  {elt: button, verb: &quot;get&quot;, path: &quot;/Artists?handler=Edit&amp;id=1&quot;, headers: {...}, ...}

htmx:beforeRequest  
  {elt: button, xhr: XMLHttpRequest, target: tr#artist-row-1, ...}

htmx:afterRequest
  {elt: button, xhr: XMLHttpRequest, target: tr#artist-row-1, successful: true, ...}

htmx:beforeSwap
  {elt: button, xhr: XMLHttpRequest, target: tr#artist-row-1, serverResponse: &quot;...&quot;, ...}

htmx:afterSwap
  {elt: button, target: tr#artist-row-1, ...}

htmx:afterSettle
  {elt: button, target: tr#artist-row-1, ...}</code></pre>
</doc-codeblock></div>
<p>Each event represents a stage in the htmx lifecycle:</p>
<ol>
<li><strong>configRequest</strong>: htmx is configuring the request (you can modify it here)</li>
<li><strong>beforeRequest</strong>: Request is about to be sent</li>
<li><strong>afterRequest</strong>: Response received (check <code v-pre>successful</code> property)</li>
<li><strong>beforeSwap</strong>: About to insert content into DOM</li>
<li><strong>afterSwap</strong>: Content inserted</li>
<li><strong>afterSettle</strong>: Any scripts in new content have run</li>
</ol>
<p>When debugging, identify where the chain breaks. If you see <code v-pre>configRequest</code> but not <code v-pre>beforeRequest</code>, something prevented the request. If you see <code v-pre>afterRequest</code> with <code v-pre>successful: false</code>, the server returned an error.</p>
<doc-anchor-target id="filtering-specific-events">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#filtering-specific-events">#</doc-anchor-trigger>
        <span>Filtering Specific Events</span>
    </h4>
</doc-anchor-target>
<p>Full logging is verbose. For targeted debugging, listen to specific events instead:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Only log errors and swaps
const eventsToLog = ['htmx:responseError', 'htmx:afterSwap', 'htmx:swapError'];

eventsToLog.forEach(eventName =&gt; {
    document.body.addEventListener(eventName, function(event) {
        console.log(eventName, event.detail);
    });
});</code></pre>
</doc-codeblock></div>
<p>This approach focuses on what matters while reducing console noise.</p>
<doc-anchor-target id="2132-the-htmxconfig-object">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2132-the-htmxconfig-object">#</doc-anchor-trigger>
        <span>21.3.2 The htmx.config Object</span>
    </h3>
</doc-anchor-target>
<p>htmx&#x27;s behavior is controlled by a configuration object. Inspecting and modifying this object helps diagnose certain issues.</p>
<doc-anchor-target id="viewing-current-configuration">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#viewing-current-configuration">#</doc-anchor-trigger>
        <span>Viewing Current Configuration</span>
    </h4>
</doc-anchor-target>
<p>In the browser console, type:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">console.log(htmx.config);</code></pre>
</doc-codeblock></div>
<p>You&#x27;ll see all current settings:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">{
    historyEnabled: true,
    historyCacheSize: 10,
    refreshOnHistoryMiss: false,
    defaultSwapStyle: &quot;innerHTML&quot;,
    defaultSwapDelay: 0,
    defaultSettleDelay: 20,
    includeIndicatorStyles: true,
    indicatorClass: &quot;htmx-indicator&quot;,
    requestClass: &quot;htmx-request&quot;,
    addedClass: &quot;htmx-added&quot;,
    settlingClass: &quot;htmx-settling&quot;,
    swappingClass: &quot;htmx-swapping&quot;,
    timeout: 0,
    // ... more settings
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="useful-settings-for-debugging">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#useful-settings-for-debugging">#</doc-anchor-trigger>
        <span>Useful Settings for Debugging</span>
    </h4>
</doc-anchor-target>
<p><strong>Disable History Cache:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">htmx.config.historyCacheSize = 0;</code></pre>
</doc-codeblock></div>
<p>When debugging back-button issues, disable caching to ensure fresh content loads on every navigation.</p>
<p><strong>Increase Timeout:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">htmx.config.timeout = 60000; // 60 seconds</code></pre>
</doc-codeblock></div>
<p>When stepping through server-side code with a debugger, increase the timeout to prevent premature request failures.</p>
<p><strong>Force History Refresh:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">htmx.config.refreshOnHistoryMiss = true;</code></pre>
</doc-codeblock></div>
<p>If history restoration fails (cache miss), this forces a full page refresh instead of showing stale content.</p>
<p><strong>Check Default Swap Style:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">console.log(htmx.config.defaultSwapStyle); // &quot;innerHTML&quot; by default</code></pre>
</doc-codeblock></div>
<p>If content is replacing elements when you expect it to replace children (or vice versa), verify the default swap style matches your expectations.</p>
<doc-anchor-target id="2133-the-htmxresponseerror-event">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2133-the-htmxresponseerror-event">#</doc-anchor-trigger>
        <span>21.3.3 The htmx:responseError Event</span>
    </h3>
</doc-anchor-target>
<p>The <code v-pre>htmx:responseError</code> event fires when the server returns a 4xx or 5xx status code. Setting up a global handler for this event provides consistent error handling.</p>
<doc-anchor-target id="global-error-handling-setup">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#global-error-handling-setup">#</doc-anchor-trigger>
        <span>Global Error Handling Setup</span>
    </h4>
</doc-anchor-target>
<p>Add this to your <code v-pre>site.js</code> or a script block in your layout:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:responseError', function(event) {
    const xhr = event.detail.xhr;
    const status = xhr.status;
    const path = event.detail.pathInfo?.requestPath || 'unknown';
    
    // Log for debugging
    console.error('htmx request failed:', {
        status: status,
        statusText: xhr.statusText,
        path: path,
        response: xhr.responseText?.substring(0, 500) // First 500 chars
    });
    
    // User-facing error handling
    handleHtmxError(status, path);
});

function handleHtmxError(status, path) {
    const messages = {
        400: 'The request was invalid. Please check your input and try again.',
        401: 'Your session has expired. Please refresh the page to log in again.',
        403: 'You do not have permission to perform this action.',
        404: 'The requested resource was not found.',
        409: 'A conflict occurred. The data may have been modified by another user.',
        421: 'The submitted data was invalid.',
        429: 'Too many requests. Please wait a moment and try again.',
        500: 'A server error occurred. Please try again later.',
        502: 'The server is temporarily unavailable. Please try again later.',
        503: 'The service is currently unavailable. Please try again later.'
    };
    
    const message = messages[status] || `An error occurred (${status}).`;
    
    // Show toast notification if available
    if (typeof showToast === 'function') {
        showToast(message, 'error');
    } else {
        alert(message);
    }
}</code></pre>
</doc-codeblock></div>
<p>This handler provides both developer information (console log) and user feedback (toast or alert).</p>
<doc-anchor-target id="integration-with-toast-notifications">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#integration-with-toast-notifications">#</doc-anchor-trigger>
        <span>Integration with Toast Notifications</span>
    </h4>
</doc-anchor-target>
<p>If you built the toast system from Chapter 21, integrate it:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:responseError', function(event) {
    const status = event.detail.xhr.status;
    
    // Skip if server sent its own error HTML
    const contentType = event.detail.xhr.getResponseHeader('Content-Type');
    if (contentType?.includes('text/html') &amp;&amp; event.detail.xhr.responseText?.includes('error-message')) {
        return; // Let the server's error content display
    }
    
    const messages = {
        400: 'Invalid request. Please check your input.',
        401: 'Session expired. Please log in again.',
        403: 'Permission denied.',
        404: 'Not found.',
        500: 'Server error. Please try again.'
    };
    
    createToast(messages[status] || `Error: ${status}`, 'error');
});</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2134-the-htmxbeforerequest-and-htmxconfigrequest-events">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2134-the-htmxbeforerequest-and-htmxconfigrequest-events">#</doc-anchor-trigger>
        <span>21.3.4 The htmx:beforeRequest and htmx:configRequest Events</span>
    </h3>
</doc-anchor-target>
<p>These events let you inspect and modify requests before they&#x27;re sent.</p>
<doc-anchor-target id="inspecting-outgoing-requests">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#inspecting-outgoing-requests">#</doc-anchor-trigger>
        <span>Inspecting Outgoing Requests</span>
    </h4>
</doc-anchor-target>
<p>The <code v-pre>htmx:configRequest</code> event fires while htmx is configuring the request. The event detail contains:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    console.log('Request configuration:', {
        verb: event.detail.verb,           // 'get', 'post', etc.
        path: event.detail.path,           // The URL
        headers: event.detail.headers,     // Request headers
        parameters: event.detail.parameters, // Form/query parameters
        target: event.detail.target,       // Target element
        triggeringEvent: event.detail.triggeringEvent // Original DOM event
    });
});</code></pre>
</doc-codeblock></div>
<p>This shows exactly what htmx will send, helping verify that parameters and headers are correct.</p>
<doc-anchor-target id="modifying-requests-for-debugging">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#modifying-requests-for-debugging">#</doc-anchor-trigger>
        <span>Modifying Requests for Debugging</span>
    </h4>
</doc-anchor-target>
<p>You can modify the request during <code v-pre>htmx:configRequest</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Add a debug parameter to all requests during development
document.body.addEventListener('htmx:configRequest', function(event) {
    event.detail.parameters['_debug'] = 'true';
    event.detail.parameters['_timestamp'] = Date.now();
});</code></pre>
</doc-codeblock></div>
<p>On the server, check for these parameters:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnGetListAsync()
{
    if (Request.Query.ContainsKey(&quot;_debug&quot;))
    {
        _logger.LogDebug(&quot;Debug request at {Timestamp}&quot;, Request.Query[&quot;_timestamp&quot;]);
    }
    // ... rest of handler
}</code></pre>
</doc-codeblock></div>
<p>You can also add custom headers:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    event.detail.headers['X-Debug-Session'] = sessionStorage.getItem('debugId') || 'none';
});</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="214-aspnet-core-server-side-debugging">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#214-aspnet-core-server-side-debugging">#</doc-anchor-trigger>
        <span>21.4 ASP.NET Core Server-Side Debugging</span>
    </h2>
</doc-anchor-target>
<p>Client-side tools show what the browser sends and receives. Server-side debugging reveals what happens between those two points.</p>
<doc-anchor-target id="2141-logging-htmx-requests">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2141-logging-htmx-requests">#</doc-anchor-trigger>
        <span>21.4.1 Logging htmx Requests</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="identifying-htmx-requests-in-handlers">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#identifying-htmx-requests-in-handlers">#</doc-anchor-trigger>
        <span>Identifying htmx Requests in Handlers</span>
    </h4>
</doc-anchor-target>
<p>Check for the <code v-pre>HX-Request</code> header to determine if a request came from htmx:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnGetAsync()
{
    var isHtmxRequest = Request.Headers.ContainsKey(&quot;HX-Request&quot;);
    
    _logger.LogInformation(
        &quot;Artists page requested | htmx: {IsHtmx} | Target: {Target} | Trigger: {Trigger}&quot;,
        isHtmxRequest,
        Request.Headers[&quot;HX-Target&quot;].FirstOrDefault() ?? &quot;(none)&quot;,
        Request.Headers[&quot;HX-Trigger&quot;].FirstOrDefault() ?? &quot;(none)&quot;
    );
    
    await LoadArtistsAsync();
    
    if (isHtmxRequest)
    {
        return Partial(&quot;Artists/_ArtistList&quot;, this);
    }
    
    return Page();
}</code></pre>
</doc-codeblock></div>
<p>This logs htmx-specific details that help trace request handling.</p>
<doc-anchor-target id="complete-htmxloggingmiddleware-implementation">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#complete-htmxloggingmiddleware-implementation">#</doc-anchor-trigger>
        <span>Complete HtmxLoggingMiddleware Implementation</span>
    </h4>
</doc-anchor-target>
<p>For complete logging across all htmx requests, create middleware:</p>
<p><strong>Middleware/HtmxLoggingMiddleware.cs</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">using System.Diagnostics;

namespace ChinookDashboard.Middleware;

public class HtmxLoggingMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger&lt;HtmxLoggingMiddleware&gt; _logger;

    public HtmxLoggingMiddleware(RequestDelegate next, ILogger&lt;HtmxLoggingMiddleware&gt; logger)
    {
        _next = next;
        _logger = logger;
    }

    public async Task InvokeAsync(HttpContext context)
    {
        // Only log htmx requests
        if (!context.Request.Headers.ContainsKey(&quot;HX-Request&quot;))
        {
            await _next(context);
            return;
        }

        var stopwatch = Stopwatch.StartNew();
        var requestId = Guid.NewGuid().ToString(&quot;N&quot;)[..8];

        // Extract htmx headers
        var htmxTarget = context.Request.Headers[&quot;HX-Target&quot;].FirstOrDefault();
        var htmxTrigger = context.Request.Headers[&quot;HX-Trigger&quot;].FirstOrDefault();
        var htmxTriggerName = context.Request.Headers[&quot;HX-Trigger-Name&quot;].FirstOrDefault();
        var htmxCurrentUrl = context.Request.Headers[&quot;HX-Current-URL&quot;].FirstOrDefault();

        _logger.LogDebug(
            &quot;[htmx:{RequestId}] {Method} {Path}{Query} | Target: {Target} | Trigger: {Trigger}&quot;,
            requestId,
            context.Request.Method,
            context.Request.Path,
            context.Request.QueryString,
            htmxTarget ?? &quot;(default)&quot;,
            htmxTrigger ?? htmxTriggerName ?? &quot;(unknown)&quot;
        );

        try
        {
            await _next(context);

            stopwatch.Stop();

            _logger.LogDebug(
                &quot;[htmx:{RequestId}] Completed {StatusCode} in {ElapsedMs}ms | Content-Length: {Length}&quot;,
                requestId,
                context.Response.StatusCode,
                stopwatch.ElapsedMilliseconds,
                context.Response.ContentLength ?? 0
            );
        }
        catch (Exception ex)
        {
            stopwatch.Stop();

            _logger.LogError(ex,
                &quot;[htmx:{RequestId}] Failed after {ElapsedMs}ms | {Method} {Path}&quot;,
                requestId,
                stopwatch.ElapsedMilliseconds,
                context.Request.Method,
                context.Request.Path
            );

            throw;
        }
    }
}

// Extension method for clean registration
public static class HtmxLoggingMiddlewareExtensions
{
    public static IApplicationBuilder UseHtmxLogging(this IApplicationBuilder builder)
    {
        return builder.UseMiddleware&lt;HtmxLoggingMiddleware&gt;();
    }
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="registration-in-programcs">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#registration-in-programcs">#</doc-anchor-trigger>
        <span>Registration in Program.cs</span>
    </h4>
</doc-anchor-target>
<p>Add the middleware in development only:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseDeveloperExceptionPage();
    app.UseHtmxLogging(); // Add htmx logging
}
else
{
    app.UseExceptionHandler(&quot;/Error&quot;);
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
// ... rest of pipeline</code></pre>
</doc-codeblock></div>
<p>Now your development logs show htmx request flow:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">[htmx:a1b2c3d4] GET /Artists?handler=List&amp;search=ac | Target: artist-list | Trigger: search-input
[htmx:a1b2c3d4] Completed 200 in 45ms | Content-Length: 2847</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2142-debugging-partial-view-returns">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2142-debugging-partial-view-returns">#</doc-anchor-trigger>
        <span>21.4.2 Debugging Partial View Returns</span>
    </h3>
</doc-anchor-target>
<p>One of the most common htmx issues is returning the wrong content from the server.</p>
<doc-anchor-target id="common-issues">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-issues">#</doc-anchor-trigger>
        <span>Common Issues</span>
    </h4>
</doc-anchor-target>
<p><strong>Returning Page() Instead of Partial()</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// Wrong - returns full page with layout
public async Task&lt;IActionResult&gt; OnGetListAsync()
{
    await LoadArtistsAsync();
    return Page(); // Includes &lt;html&gt;, &lt;head&gt;, &lt;body&gt;, etc.
}

// Correct - returns just the partial content
public async Task&lt;IActionResult&gt; OnGetListAsync()
{
    await LoadArtistsAsync();
    return Partial(&quot;Artists/_ArtistList&quot;, this);
}</code></pre>
</doc-codeblock></div>
<p><strong>Wrong Partial View Path</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// Wrong - looks for Pages/Artists/_List.cshtml
return Partial(&quot;_List&quot;, model);

// Correct - full path from Shared folder
return Partial(&quot;Artists/_ArtistList&quot;, model);

// Also correct - explicit path
return Partial(&quot;~/Pages/Shared/Artists/_ArtistList.cshtml&quot;, model);</code></pre>
</doc-codeblock></div>
<p><strong>Model Type Mismatch</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// Partial expects ArtistListModel but receives List&lt;Artist&gt;
return Partial(&quot;Artists/_ArtistList&quot;, artists); // Wrong type

// Correct - pass the expected model type
return Partial(&quot;Artists/_ArtistList&quot;, new ArtistListModel { Artists = artists });</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="diagnostic-extension-method">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#diagnostic-extension-method">#</doc-anchor-trigger>
        <span>Diagnostic Extension Method</span>
    </h4>
</doc-anchor-target>
<p>Create an extension that logs partial view returns:</p>
<p><strong>Extensions/PartialResultExtensions.cs</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;

namespace ChinookDashboard.Extensions;

public static class PartialResultExtensions
{
    public static PartialViewResult PartialWithDiagnostics(
        this PageModel page,
        string viewName,
        object? model,
        ILogger logger)
    {
        var modelType = model?.GetType().Name ?? &quot;null&quot;;
        var modelCount = GetItemCount(model);
        
        logger.LogDebug(
            &quot;Returning partial '{ViewName}' | Model: {ModelType} | Items: {Count}&quot;,
            viewName,
            modelType,
            modelCount
        );

        return page.Partial(viewName, model);
    }

    private static string GetItemCount(object? model)
    {
        if (model == null) return &quot;n/a&quot;;
        
        // Check for common collection types
        if (model is System.Collections.ICollection collection)
            return collection.Count.ToString();
            
        // Check for paginated list
        var itemsProperty = model.GetType().GetProperty(&quot;Items&quot;);
        if (itemsProperty?.GetValue(model) is System.Collections.ICollection items)
            return items.Count.ToString();
            
        return &quot;n/a&quot;;
    }
}</code></pre>
</doc-codeblock></div>
<p>Use it in your handlers:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnGetListAsync()
{
    await LoadArtistsAsync();
    return this.PartialWithDiagnostics(&quot;Artists/_ArtistList&quot;, Artists, _logger);
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="adding-debug-headers-to-responses">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#adding-debug-headers-to-responses">#</doc-anchor-trigger>
        <span>Adding Debug Headers to Responses</span>
    </h4>
</doc-anchor-target>
<p>In development, add headers that help identify what was returned:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnGetListAsync()
{
    await LoadArtistsAsync();
    
    if (Request.Headers.ContainsKey(&quot;HX-Request&quot;))
    {
        // Add debug headers in development
        Response.Headers.Append(&quot;X-Debug-Partial&quot;, &quot;Artists/_ArtistList&quot;);
        Response.Headers.Append(&quot;X-Debug-Model&quot;, Artists?.GetType().Name ?? &quot;null&quot;);
        Response.Headers.Append(&quot;X-Debug-Count&quot;, Artists?.Count.ToString() ?? &quot;0&quot;);
    }
    
    return Partial(&quot;Artists/_ArtistList&quot;, this);
}</code></pre>
</doc-codeblock></div>
<p>These headers appear in the Network tab&#x27;s response headers, confirming what the server intended to return.</p>
<doc-anchor-target id="2143-anti-forgery-token-debugging">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2143-anti-forgery-token-debugging">#</doc-anchor-trigger>
        <span>21.4.3 Anti-Forgery Token Debugging</span>
    </h3>
</doc-anchor-target>
<p>Anti-forgery token failures are among the most frustrating htmx issues because they silently fail with a 400 status code.</p>
<doc-anchor-target id="common-issues-and-symptoms">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-issues-and-symptoms">#</doc-anchor-trigger>
        <span>Common Issues and Symptoms</span>
    </h4>
</doc-anchor-target>
<p><strong>Symptoms:</strong></p>
<ul>
<li>POST/PUT/DELETE requests return 400 Bad Request</li>
<li>Server logs show &quot;The required antiforgery cookie is not present&quot; or &quot;The antiforgery token could not be decrypted&quot;</li>
<li>Request works in a regular form but fails with htmx</li>
</ul>
<p><strong>Common Causes:</strong></p>
<ol>
<li>Token not included in htmx request headers</li>
<li>No <code v-pre>&lt;form&gt;</code> element with token on the page</li>
<li><code v-pre>[ValidateAntiForgeryToken]</code> attribute missing from handler</li>
<li>Token expired</li>
<li>Cookie and token mismatch after deployment</li>
</ol>
<doc-anchor-target id="debugging-token-flow">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-token-flow">#</doc-anchor-trigger>
        <span>Debugging Token Flow</span>
    </h4>
</doc-anchor-target>
<p><strong>Step 1: Verify Token Exists on Page</strong></p>
<p>In browser console:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Check for token input
document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
// Should return an &lt;input&gt; element with a long value

// Get the token value
document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]')?.value;
// Should return a long string like &quot;CfDJ8N...&quot;</code></pre>
</doc-codeblock></div>
<p>If this returns <code v-pre>null</code>, add a form with an anti-forgery token to your layout:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- In _Layout.cshtml, typically in a hidden location --&gt;
&lt;form id=&quot;__AjaxAntiForgeryForm&quot; asp-antiforgery=&quot;true&quot; style=&quot;display:none;&quot;&gt;&lt;/form&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Step 2: Verify htmx Sends the Token</strong></p>
<p>Check that your JavaScript includes the token in requests:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    var token = document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
    if (token) {
        event.detail.headers['RequestVerificationToken'] = token.value;
        console.log('Anti-forgery token attached:', token.value.substring(0, 20) + '...');
    } else {
        console.warn('No anti-forgery token found on page!');
    }
});</code></pre>
</doc-codeblock></div>
<p><strong>Step 3: Verify Server Receives the Token</strong></p>
<p>Check the Network tab. Under Request Headers, you should see:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">RequestVerificationToken: CfDJ8N...</code></pre>
</doc-codeblock></div>
<p>If the header is missing, the client-side code isn&#x27;t attaching it.</p>
<p><strong>Step 4: Verify Server Configuration</strong></p>
<p>In <code v-pre>Program.cs</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">builder.Services.AddAntiforgery(options =&gt;
{
    options.HeaderName = &quot;RequestVerificationToken&quot;; // Must match client header name
});</code></pre>
</doc-codeblock></div>
<p>And verify your handler has the attribute:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">[ValidateAntiForgeryToken]
public async Task&lt;IActionResult&gt; OnPostUpdateAsync(int id, string name)
{
    // This will fail without the attribute when tokens are enabled
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="complete-verification-code">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#complete-verification-code">#</doc-anchor-trigger>
        <span>Complete Verification Code</span>
    </h4>
</doc-anchor-target>
<p>Add this diagnostic code temporarily to identify token issues:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// In your PageModel, add a diagnostic handler
public IActionResult OnPostDiagnoseTokenAsync()
{
    var headerToken = Request.Headers[&quot;RequestVerificationToken&quot;].FirstOrDefault();
    var formToken = Request.Form[&quot;__RequestVerificationToken&quot;].FirstOrDefault();
    var cookieToken = Request.Cookies
        .FirstOrDefault(c =&gt; c.Key.StartsWith(&quot;.AspNetCore.Antiforgery&quot;))
        .Value;

    _logger.LogInformation(&quot;Token Diagnosis: Header={Header}, Form={Form}, Cookie={Cookie}&quot;,
        headerToken?.Substring(0, Math.Min(20, headerToken?.Length ?? 0)) ?? &quot;(missing)&quot;,
        formToken?.Substring(0, Math.Min(20, formToken?.Length ?? 0)) ?? &quot;(missing)&quot;,
        !string.IsNullOrEmpty(cookieToken) ? &quot;(present)&quot; : &quot;(missing)&quot;
    );

    return Content(&quot;Check server logs for token diagnosis&quot;);
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2144-debugging-model-binding">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2144-debugging-model-binding">#</doc-anchor-trigger>
        <span>21.4.4 Debugging Model Binding</span>
    </h3>
</doc-anchor-target>
<p>Model binding transforms request data into handler parameters. When binding fails, parameters arrive as null or with unexpected values.</p>
<doc-anchor-target id="logging-bound-values">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#logging-bound-values">#</doc-anchor-trigger>
        <span>Logging Bound Values</span>
    </h4>
</doc-anchor-target>
<p>Add explicit logging to see what values arrive:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnPostUpdateAsync(
    int id,
    [FromForm] string? name,
    [FromForm] int? genreId)
{
    _logger.LogDebug(
        &quot;Model binding received: id={Id}, name={Name}, genreId={GenreId}&quot;,
        id,
        name ?? &quot;(null)&quot;,
        genreId?.ToString() ?? &quot;(null)&quot;
    );

    // Rest of handler...
}</code></pre>
</doc-codeblock></div>
<p>If values are null when you expect them to have data, check the parameter names match the form field names.</p>
<doc-anchor-target id="diagnosing-binding-failures-via-modelstate">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#diagnosing-binding-failures-via-modelstate">#</doc-anchor-trigger>
        <span>Diagnosing Binding Failures via ModelState</span>
    </h4>
</doc-anchor-target>
<p>When validation fails, check <code v-pre>ModelState</code> for binding errors:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnPostUpdateAsync(ArtistEditModel model)
{
    if (!ModelState.IsValid)
    {
        foreach (var entry in ModelState)
        {
            if (entry.Value.Errors.Any())
            {
                _logger.LogWarning(
                    &quot;Binding/validation error for '{Key}': {Errors}&quot;,
                    entry.Key,
                    string.Join(&quot;; &quot;, entry.Value.Errors.Select(e =&gt; 
                        e.ErrorMessage ?? e.Exception?.Message ?? &quot;Unknown error&quot;))
                );
            }
        }
        
        return Partial(&quot;Artists/_ArtistEditRow&quot;, model);
    }

    // Continue with valid model...
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="common-binding-issues">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-binding-issues">#</doc-anchor-trigger>
        <span>Common Binding Issues</span>
    </h4>
</doc-anchor-target>
<p><strong>Parameter Name Mismatch:</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- HTML uses 'artistName' --&gt;
&lt;input name=&quot;artistName&quot; value=&quot;AC/DC&quot; /&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// Handler expects 'name' - won't bind!
public async Task&lt;IActionResult&gt; OnPostUpdateAsync(string name)

// Fix: Match the name
public async Task&lt;IActionResult&gt; OnPostUpdateAsync(string artistName)

// Or use [FromForm] with explicit name
public async Task&lt;IActionResult&gt; OnPostUpdateAsync([FromForm(Name = &quot;artistName&quot;)] string name)</code></pre>
</doc-codeblock></div>
<p><strong>Checkbox Binding:</strong></p>
<p>Checkboxes only submit when checked. For unchecked state, you need a hidden field:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Without hidden field, unchecked = no value sent = null --&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;isActive&quot; value=&quot;true&quot; /&gt;

&lt;!-- With hidden field, unchecked = &quot;false&quot;, checked = &quot;true&quot; --&gt;
&lt;input type=&quot;hidden&quot; name=&quot;isActive&quot; value=&quot;false&quot; /&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;isActive&quot; value=&quot;true&quot; /&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Array Binding:</strong></p>
<p>Multiple values need matching names with proper indexing:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- For List&lt;int&gt; selectedIds --&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;selectedIds&quot; value=&quot;1&quot; /&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;selectedIds&quot; value=&quot;2&quot; /&gt;
&lt;input type=&quot;checkbox&quot; name=&quot;selectedIds&quot; value=&quot;3&quot; /&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// Handler receives all checked values
public async Task&lt;IActionResult&gt; OnPostBulkDeleteAsync(List&lt;int&gt; selectedIds)
{
    _logger.LogDebug(&quot;Selected IDs: {Ids}&quot;, string.Join(&quot;, &quot;, selectedIds));
    // ...
}</code></pre>
</doc-codeblock></div>
<p><strong>Debugging Request Body:</strong></p>
<p>For complex binding issues, log the raw request:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnPostUpdateAsync()
{
    // Log all form values
    foreach (var key in Request.Form.Keys)
    {
        _logger.LogDebug(&quot;Form[{Key}] = {Value}&quot;, key, Request.Form[key]);
    }
    
    // Log query parameters too
    foreach (var key in Request.Query.Keys)
    {
        _logger.LogDebug(&quot;Query[{Key}] = {Value}&quot;, key, Request.Query[key]);
    }
    
    // Then bind manually or use TryUpdateModelAsync
    var id = int.Parse(Request.Form[&quot;id&quot;]!);
    var name = Request.Form[&quot;name&quot;].ToString();
    
    // Continue with values...
}</code></pre>
</doc-codeblock></div>
<p>This diagnostic approach reveals exactly what data the server received, independent of model binding.</p>
<doc-anchor-target id="215-common-htmx-problems-and-solutions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#215-common-htmx-problems-and-solutions">#</doc-anchor-trigger>
        <span>21.5 Common htmx Problems and Solutions</span>
    </h2>
</doc-anchor-target>
<p>This section catalogs the most frequent htmx issues and provides systematic approaches to diagnose and fix each one. Each problem includes symptoms, debugging steps, root cause analysis, and complete solutions.</p>
<doc-anchor-target id="2151-nothing-happens-when-clicking">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2151-nothing-happens-when-clicking">#</doc-anchor-trigger>
        <span>21.5.1 &quot;Nothing Happens&quot; When Clicking</span>
    </h3>
</doc-anchor-target>
<p>The most common htmx complaint: you click a button or link and nothing visible happens. No error, no feedback, no change.</p>
<doc-anchor-target id="diagnostic-checklist">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#diagnostic-checklist">#</doc-anchor-trigger>
        <span>Diagnostic Checklist</span>
    </h4>
</doc-anchor-target>
<p>Work through this checklist in order. Most &quot;nothing happens&quot; issues resolve within the first few items.</p>
<p><strong>1. Is htmx loaded?</strong></p>
<p>Open browser console and type:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">typeof htmx</code></pre>
</doc-codeblock></div>
<p>If this returns <code v-pre>&quot;undefined&quot;</code>, htmx isn&#x27;t loaded. Check your script include.</p>
<p><strong>2. Are there JavaScript errors?</strong></p>
<p>Check the Console tab for red error messages. Any JavaScript error might prevent htmx from functioning.</p>
<p><strong>3. Does the element have htmx attributes?</strong></p>
<p>Right-click the element, select Inspect, and verify htmx attributes are present:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button hx-get=&quot;/Artists?handler=Edit&quot; ...&gt;</code></pre>
</doc-codeblock></div>
<p>If attributes are missing, check your Razor view source.</p>
<p><strong>4. Is a network request being made?</strong></p>
<p>Open Network tab, filter to Fetch/XHR, then click the element. If no request appears, the trigger isn&#x27;t firing.</p>
<p><strong>5. What&#x27;s the response status?</strong></p>
<p>If a request appears, check its status code:</p>
<ul>
<li><strong>200</strong>: Server succeeded, problem is with swap</li>
<li><strong>204</strong>: No content returned, htmx does nothing (by design)</li>
<li><strong>400</strong>: Bad request (often anti-forgery token)</li>
<li><strong>404</strong>: Handler or page not found</li>
<li><strong>500</strong>: Server error</li>
</ul>
<p><strong>6. Does the response contain expected content?</strong></p>
<p>Click the request in Network tab, check Response or Preview. Verify it&#x27;s the HTML you expect.</p>
<p><strong>7. Does the target element exist?</strong></p>
<p>In Console, test the selector:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.querySelector('#my-target')</code></pre>
</doc-codeblock></div>
<p>If this returns <code v-pre>null</code>, the target doesn&#x27;t exist.</p>
<p><strong>8. Is hx-swap correct for the situation?</strong></p>
<p>If <code v-pre>hx-swap=&quot;outerHTML&quot;</code> but you&#x27;re returning content that should go inside the element, or vice versa, the result may look like nothing happened.</p>
<doc-anchor-target id="common-causes-with-code-examples">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-causes-with-code-examples">#</doc-anchor-trigger>
        <span>Common Causes with Code Examples</span>
    </h4>
</doc-anchor-target>
<p><strong>htmx Not Processing Dynamic Content</strong></p>
<p>When content is loaded via htmx, new elements in that content need htmx processing. By default, htmx processes new content automatically after swaps. But if you&#x27;re adding content via other JavaScript, htmx won&#x27;t know about it.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- This button loads new content --&gt;
&lt;button hx-get=&quot;/load-more&quot; hx-target=&quot;#container&quot;&gt;Load More&lt;/button&gt;

&lt;div id=&quot;container&quot;&gt;
    &lt;!-- htmx loads this content --&gt;
    &lt;div class=&quot;item&quot;&gt;
        &lt;!-- This button works - htmx processes it after swap --&gt;
        &lt;button hx-delete=&quot;/items/1&quot;&gt;Delete&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>But if you add content with vanilla JavaScript:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// This bypasses htmx processing
container.innerHTML += '&lt;button hx-delete=&quot;/items/2&quot;&gt;Delete&lt;/button&gt;';
// The new button won't work!

// Fix: Tell htmx to process the new content
container.innerHTML += '&lt;button hx-delete=&quot;/items/2&quot;&gt;Delete&lt;/button&gt;';
htmx.process(container);</code></pre>
</doc-codeblock></div>
<p><strong>Missing htmx.js Include</strong></p>
<p>The script tag might be missing, misplaced, or failing to load:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Check that this exists in _Layout.cshtml --&gt;
&lt;script src=&quot;~/lib/htmx/htmx.min.js&quot;&gt;&lt;/script&gt;

&lt;!-- Or from CDN --&gt;
&lt;script src=&quot;https://unpkg.com/htmx.org@2.0.4&quot;&gt;&lt;/script&gt;</code></pre>
</doc-codeblock></div>
<p>Verify in Network tab that the script loads with status 200. A 404 means the file path is wrong.</p>
<p><strong>Element Inside a Form with Conflicting Action</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Problem: Button inside form triggers form submit, not htmx --&gt;
&lt;form action=&quot;/traditional-submit&quot; method=&quot;post&quot;&gt;
    &lt;button hx-get=&quot;/htmx-action&quot;&gt;This won't work as expected&lt;/button&gt;
&lt;/form&gt;

&lt;!-- Solution 1: Use type=&quot;button&quot; --&gt;
&lt;form action=&quot;/traditional-submit&quot; method=&quot;post&quot;&gt;
    &lt;button type=&quot;button&quot; hx-get=&quot;/htmx-action&quot;&gt;Now htmx handles it&lt;/button&gt;
&lt;/form&gt;

&lt;!-- Solution 2: Move button outside form --&gt;
&lt;form action=&quot;/traditional-submit&quot; method=&quot;post&quot;&gt;
    &lt;!-- form content --&gt;
&lt;/form&gt;
&lt;button hx-get=&quot;/htmx-action&quot;&gt;Separate from form&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="demo-the-silent-button">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-the-silent-button">#</doc-anchor-trigger>
        <span>Demo: The Silent Button</span>
    </h4>
</doc-anchor-target>
<p><strong>Symptom</strong>: Clicking &quot;Load Artists&quot; does nothing. No console errors, no network activity.</p>
<p><strong>The Code</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@page
@model ArtistsModel

&lt;h1&gt;Artists&lt;/h1&gt;

&lt;button hx-get=&quot;/Artists?handler=List&quot; 
        hx-target=&quot;#artist-container&quot;&gt;
    Load Artists
&lt;/button&gt;

&lt;div id=&quot;artist-container&quot;&gt;
    &lt;!-- Artists load here --&gt;
&lt;/div&gt;

@section Scripts {
    &lt;!-- Scripts section exists but... --&gt;
}</code></pre>
</doc-codeblock></div>
<p><strong>Debug Steps</strong>:</p>
<ol>
<li><p>Console: <code v-pre>typeof htmx</code> returns <code v-pre>&quot;undefined&quot;</code> - htmx isn&#x27;t loaded!</p>
</li>
<li><p>Check _Layout.cshtml - the htmx script is there</p>
</li>
<li><p>Check if the Scripts section renders: look at page source, htmx script is missing from this page</p>
</li>
<li><p>Found it: _Layout.cshtml has <code v-pre>@RenderSection(&quot;Scripts&quot;, required: false)</code> but the htmx include is inside that section in a _Scripts partial, and this page has its own Scripts section that overrides it</p>
</li>
</ol>
<p><strong>Root Cause</strong>: The page&#x27;s <code v-pre>@section Scripts</code> overrides the layout&#x27;s script section, excluding the htmx include.</p>
<p><strong>Solution</strong>:</p>
<p>Move htmx to the layout body, outside any section:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- _Layout.cshtml - place before &lt;/body&gt;, outside sections --&gt;
&lt;script src=&quot;~/lib/htmx/htmx.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;~/lib/hyperscript/_hyperscript.min.js&quot;&gt;&lt;/script&gt;

@await RenderSectionAsync(&quot;Scripts&quot;, required: false)
&lt;/body&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Prevention</strong>: Always include htmx in the main layout body, not in a replaceable section.</p>
<doc-anchor-target id="2152-content-replaces-wrong-element">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2152-content-replaces-wrong-element">#</doc-anchor-trigger>
        <span>21.5.2 Content Replaces Wrong Element</span>
    </h3>
</doc-anchor-target>
<p>You click a button, content updates, but it appears in the wrong place or replaces the wrong element.</p>
<doc-anchor-target id="duplicate-id-problems">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#duplicate-id-problems">#</doc-anchor-trigger>
        <span>Duplicate ID Problems</span>
    </h4>
</doc-anchor-target>
<p>HTML IDs must be unique. When multiple elements share an ID, <code v-pre>querySelector</code> returns only the first one.</p>
<p><strong>Symptom</strong>: Editing artist row 5 updates artist row 1 instead.</p>
<p><strong>The Problem</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Generated in a loop without unique IDs --&gt;
&lt;tr id=&quot;artist-row&quot;&gt;  &lt;!-- First occurrence --&gt;
    &lt;td&gt;AC/DC&lt;/td&gt;
    &lt;td&gt;&lt;button hx-get=&quot;/edit/1&quot; hx-target=&quot;#artist-row&quot;&gt;Edit&lt;/button&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr id=&quot;artist-row&quot;&gt;  &lt;!-- Duplicate! --&gt;
    &lt;td&gt;Accept&lt;/td&gt;
    &lt;td&gt;&lt;button hx-get=&quot;/edit/2&quot; hx-target=&quot;#artist-row&quot;&gt;Edit&lt;/button&gt;&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p><strong>The Fix</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@foreach (var artist in Model.Artists)
{
    &lt;tr id=&quot;artist-row-@artist.Id&quot;&gt;
        &lt;td&gt;@artist.Name&lt;/td&gt;
        &lt;td&gt;
            &lt;button hx-get=&quot;/Artists?handler=Edit&amp;id=@artist.Id&quot; 
                    hx-target=&quot;#artist-row-@artist.Id&quot;&gt;
                Edit
            &lt;/button&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
}</code></pre>
</doc-codeblock></div>
<p><strong>Debug Technique</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Find all elements with a given ID (should be only one!)
document.querySelectorAll('[id=&quot;artist-row&quot;]').length
// If &gt; 1, you have duplicate IDs</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="target-doesnt-exist-when-response-arrives">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#target-doesnt-exist-when-response-arrives">#</doc-anchor-trigger>
        <span>Target Doesn&#x27;t Exist When Response Arrives</span>
    </h4>
</doc-anchor-target>
<p>The target element might be removed by a previous operation or never existed.</p>
<p><strong>Symptom</strong>: First click works, subsequent clicks do nothing.</p>
<p><strong>The Problem</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Initial state --&gt;
&lt;div id=&quot;modal-container&quot;&gt;&lt;/div&gt;

&lt;button hx-get=&quot;/Artists?handler=CreateForm&quot; 
        hx-target=&quot;#modal-container&quot;&gt;
    Add Artist
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Response replaces container with modal content --&gt;
&lt;div class=&quot;modal&quot; id=&quot;create-modal&quot;&gt;
    &lt;form hx-post=&quot;/Artists?handler=Create&quot;
          hx-target=&quot;#modal-container&quot;&gt;  &lt;!-- This ID no longer exists! --&gt;
        ...
    &lt;/form&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>The form&#x27;s <code v-pre>hx-target</code> points to <code v-pre>#modal-container</code>, which was replaced by <code v-pre>#create-modal</code>.</p>
<p><strong>The Fix</strong>:</p>
<p>Option 1: Use <code v-pre>hx-swap=&quot;innerHTML&quot;</code> to preserve the container:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button hx-get=&quot;/Artists?handler=CreateForm&quot; 
        hx-target=&quot;#modal-container&quot;
        hx-swap=&quot;innerHTML&quot;&gt;
    Add Artist
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>Option 2: Update the form&#x27;s target to match the new structure:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div class=&quot;modal&quot; id=&quot;create-modal&quot;&gt;
    &lt;form hx-post=&quot;/Artists?handler=Create&quot;
          hx-target=&quot;#create-modal&quot;
          hx-swap=&quot;outerHTML&quot;&gt;
        ...
    &lt;/form&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="debugging-target-resolution">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-target-resolution">#</doc-anchor-trigger>
        <span>Debugging Target Resolution</span>
    </h4>
</doc-anchor-target>
<p>Add an event listener that warns when targets don&#x27;t exist:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    const elt = event.detail.elt;
    const targetSelector = elt.getAttribute('hx-target');
    
    if (targetSelector &amp;&amp; !targetSelector.startsWith('this') &amp;&amp; 
        !targetSelector.startsWith('closest') &amp;&amp; !targetSelector.startsWith('find')) {
        const target = document.querySelector(targetSelector);
        if (!target) {
            console.error('htmx target not found:', {
                selector: targetSelector,
                trigger: elt,
                suggestion: 'Check if target was removed by previous swap'
            });
        }
    }
});</code></pre>
</doc-codeblock></div>
<p>This logs a warning before the request is made if the target element doesn&#x27;t exist.</p>
<doc-anchor-target id="demo-second-click-fails">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-second-click-fails">#</doc-anchor-trigger>
        <span>Demo: Second Click Fails</span>
    </h4>
</doc-anchor-target>
<p><strong>Symptom</strong>: Click &quot;Edit&quot; on a row, the edit form appears. Click &quot;Cancel&quot; and nothing happens.</p>
<p><strong>The Code</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Artist row partial --&gt;
&lt;tr id=&quot;artist-row-1&quot;&gt;
    &lt;td&gt;AC/DC&lt;/td&gt;
    &lt;td&gt;
        &lt;button hx-get=&quot;/Artists?handler=Edit&amp;id=1&quot;
                hx-target=&quot;#artist-row-1&quot;
                hx-swap=&quot;outerHTML&quot;&gt;
            Edit
        &lt;/button&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Edit form partial (returned from server) --&gt;
&lt;tr id=&quot;artist-edit-1&quot;&gt;  &lt;!-- Different ID! --&gt;
    &lt;td colspan=&quot;2&quot;&gt;
        &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=1&quot;&gt;
            &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
            &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;
            &lt;button type=&quot;button&quot;
                    hx-get=&quot;/Artists?handler=Cancel&amp;id=1&quot;
                    hx-target=&quot;#artist-row-1&quot;&gt;  &lt;!-- Original ID no longer exists --&gt;
                Cancel
            &lt;/button&gt;
        &lt;/form&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Debug Steps</strong>:</p>
<ol>
<li>First click: Network shows 200, row becomes edit form - working</li>
<li>Click Cancel: Network shows 200, nothing changes</li>
<li>Check Console: &quot;htmx target not found: #artist-row-1&quot; (if using our debug listener)</li>
<li>Elements tab: search for &quot;artist-row-1&quot; - not found, only &quot;artist-edit-1&quot; exists</li>
</ol>
<p><strong>Root Cause</strong>: The <code v-pre>outerHTML</code> swap replaced <code v-pre>#artist-row-1</code> with <code v-pre>#artist-edit-1</code>. The Cancel button still targets the old ID.</p>
<p><strong>Solution</strong>: Use consistent IDs or relative targeting:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Option 1: Keep same ID --&gt;
&lt;tr id=&quot;artist-row-1&quot;&gt;
    &lt;td colspan=&quot;2&quot;&gt;
        &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=1&quot;
              hx-target=&quot;#artist-row-1&quot;
              hx-swap=&quot;outerHTML&quot;&gt;
            ...
        &lt;/form&gt;
    &lt;/td&gt;
&lt;/tr&gt;

&lt;!-- Option 2: Use relative selector --&gt;
&lt;button type=&quot;button&quot;
        hx-get=&quot;/Artists?handler=Cancel&amp;id=1&quot;
        hx-target=&quot;closest tr&quot;
        hx-swap=&quot;outerHTML&quot;&gt;
    Cancel
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2153-oob-updates-not-working">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2153-oob-updates-not-working">#</doc-anchor-trigger>
        <span>21.5.3 OOB Updates Not Working</span>
    </h3>
</doc-anchor-target>
<p>Out-of-band (OOB) updates let a single response update multiple page areas. When they fail, only the primary target updates.</p>
<doc-anchor-target id="troubleshooting-steps">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#troubleshooting-steps">#</doc-anchor-trigger>
        <span>Troubleshooting Steps</span>
    </h4>
</doc-anchor-target>
<p><strong>1. Verify OOB element has correct attribute</strong></p>
<p>The element in the response must have <code v-pre>hx-swap-oob</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- In server response --&gt;
&lt;span id=&quot;artist-count&quot; hx-swap-oob=&quot;true&quot;&gt;275&lt;/span&gt;</code></pre>
</doc-codeblock></div>
<p><strong>2. Verify target element exists in DOM</strong></p>
<p>The OOB element&#x27;s ID must match an existing element:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.querySelector('#artist-count')  // Must not be null</code></pre>
</doc-codeblock></div>
<p><strong>3. Check OOB element is at root level of response</strong></p>
<p>OOB elements must be direct children of the response, not nested inside other elements:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Correct: OOB at root level --&gt;
&lt;div&gt;Primary content&lt;/div&gt;
&lt;span id=&quot;artist-count&quot; hx-swap-oob=&quot;true&quot;&gt;275&lt;/span&gt;

&lt;!-- Wrong: OOB nested inside container --&gt;
&lt;div&gt;
    Primary content
    &lt;span id=&quot;artist-count&quot; hx-swap-oob=&quot;true&quot;&gt;275&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p><strong>4. Verify OOB value syntax</strong></p>
<p>Valid values include:</p>
<ul>
<li><code v-pre>true</code> - replace element (same as <code v-pre>outerHTML</code>)</li>
<li><code v-pre>innerHTML</code> - replace element&#x27;s content</li>
<li><code v-pre>outerHTML</code> - replace entire element</li>
<li><code v-pre>beforebegin</code>, <code v-pre>afterbegin</code>, <code v-pre>beforeend</code>, <code v-pre>afterend</code> - insert adjacent</li>
<li><code v-pre>delete</code> - remove the target element</li>
<li><code v-pre>none</code> - do nothing (useful for conditional updates)</li>
</ul>
<doc-anchor-target id="demo-oob-element-id-mismatch">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-oob-element-id-mismatch">#</doc-anchor-trigger>
        <span>Demo: OOB Element ID Mismatch</span>
    </h4>
</doc-anchor-target>
<p><strong>Symptom</strong>: Creating a new artist adds the row but doesn&#x27;t update the count badge.</p>
<p><strong>The Response</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- New row (primary swap target) --&gt;
&lt;tr id=&quot;artist-row-276&quot; hx-swap-oob=&quot;afterbegin:#artist-table-body&quot;&gt;
    &lt;td&gt;New Artist&lt;/td&gt;
    &lt;td&gt;0 albums&lt;/td&gt;
&lt;/tr&gt;

&lt;!-- Count update (OOB) --&gt;
&lt;span id=&quot;artistCount&quot; hx-swap-oob=&quot;true&quot;&gt;276&lt;/span&gt;</code></pre>
</doc-codeblock></div>
<p><strong>The Page</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;span id=&quot;artist-count&quot;&gt;275&lt;/span&gt;  &lt;!-- Note: kebab-case --&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Debug Steps</strong>:</p>
<ol>
<li>Network tab shows 200 response with both elements</li>
<li>Table row appears (primary swap worked)</li>
<li>Count still shows 275 (OOB failed)</li>
<li>Response Preview shows <code v-pre>id=&quot;artistCount&quot;</code> (camelCase)</li>
<li>Elements tab shows page has <code v-pre>id=&quot;artist-count&quot;</code> (kebab-case)</li>
</ol>
<p><strong>Root Cause</strong>: ID mismatch due to inconsistent naming convention.</p>
<p><strong>Solution</strong>: Use consistent ID naming:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Server response - match page ID exactly --&gt;
&lt;span id=&quot;artist-count&quot; hx-swap-oob=&quot;true&quot;&gt;276&lt;/span&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="debugging-oob-with-events">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-oob-with-events">#</doc-anchor-trigger>
        <span>Debugging OOB with Events</span>
    </h4>
</doc-anchor-target>
<p>htmx fires events for OOB processing:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Log OOB swap attempts
document.body.addEventListener('htmx:oobBeforeSwap', function(event) {
    console.log('OOB before swap:', {
        fragment: event.detail.fragment?.outerHTML?.substring(0, 100),
        target: event.detail.target,
        targetId: event.detail.target?.id
    });
});

// Log successful OOB swaps
document.body.addEventListener('htmx:oobAfterSwap', function(event) {
    console.log('OOB after swap:', {
        target: event.detail.target?.id || event.detail.target
    });
});

// Log OOB errors
document.body.addEventListener('htmx:oobErrorNoTarget', function(event) {
    console.error('OOB target not found:', {
        content: event.detail.content?.outerHTML?.substring(0, 100)
    });
});</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2154-forms-submit-but-data-is-lost">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2154-forms-submit-but-data-is-lost">#</doc-anchor-trigger>
        <span>21.5.4 Forms Submit But Data Is Lost</span>
    </h3>
</doc-anchor-target>
<p>The form submits, the server receives the request, but form field values are missing or empty.</p>
<doc-anchor-target id="button-outside-form-problem">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#button-outside-form-problem">#</doc-anchor-trigger>
        <span>Button Outside Form Problem</span>
    </h4>
</doc-anchor-target>
<p>Buttons with htmx attributes outside a form don&#x27;t automatically include form data.</p>
<p><strong>Symptom</strong>: Server receives POST request but all form values are null.</p>
<p><strong>The Problem</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form id=&quot;artist-form&quot;&gt;
    &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
    &lt;input name=&quot;genre&quot; value=&quot;Rock&quot; /&gt;
&lt;/form&gt;

&lt;!-- Button outside form - doesn't include form data! --&gt;
&lt;button hx-post=&quot;/Artists?handler=Create&quot;
        hx-target=&quot;#result&quot;&gt;
    Save
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p><strong>The Fix</strong>:</p>
<p>Option 1: Move button inside form:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form hx-post=&quot;/Artists?handler=Create&quot; hx-target=&quot;#result&quot;&gt;
    &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
    &lt;input name=&quot;genre&quot; value=&quot;Rock&quot; /&gt;
    &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;
&lt;/form&gt;</code></pre>
</doc-codeblock></div>
<p>Option 2: Use <code v-pre>hx-include</code> to specify form:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form id=&quot;artist-form&quot;&gt;
    &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
    &lt;input name=&quot;genre&quot; value=&quot;Rock&quot; /&gt;
&lt;/form&gt;

&lt;button hx-post=&quot;/Artists?handler=Create&quot;
        hx-include=&quot;#artist-form&quot;
        hx-target=&quot;#result&quot;&gt;
    Save
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>Option 3: Use <code v-pre>form</code> attribute (HTML5):</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form id=&quot;artist-form&quot; hx-post=&quot;/Artists?handler=Create&quot; hx-target=&quot;#result&quot;&gt;
    &lt;input name=&quot;name&quot; value=&quot;AC/DC&quot; /&gt;
    &lt;input name=&quot;genre&quot; value=&quot;Rock&quot; /&gt;
&lt;/form&gt;

&lt;!-- Button references form by ID --&gt;
&lt;button type=&quot;submit&quot; form=&quot;artist-form&quot;&gt;Save&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="hx-include-vs-form-containment">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#hx-include-vs-form-containment">#</doc-anchor-trigger>
        <span>hx-include vs Form Containment</span>
    </h4>
</doc-anchor-target>
<p><code v-pre>hx-include</code> specifies additional elements to include in the request. Understanding its behavior prevents data loss:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- hx-include adds to, doesn't replace, automatic inclusion --&gt;
&lt;form hx-post=&quot;/save&quot;&gt;
    &lt;input name=&quot;included-by-form&quot; value=&quot;yes&quot; /&gt;
    
    &lt;button type=&quot;submit&quot; hx-include=&quot;#extra-data&quot;&gt;Save&lt;/button&gt;
&lt;/form&gt;

&lt;div id=&quot;extra-data&quot;&gt;
    &lt;input name=&quot;extra&quot; value=&quot;also included&quot; /&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>Both <code v-pre>included-by-form</code> and <code v-pre>extra</code> are sent because the button is inside the form AND specifies <code v-pre>hx-include</code>.</p>
<p><strong>Common Mistake</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- hx-include on the form itself doesn't do what you might expect --&gt;
&lt;form hx-post=&quot;/save&quot; hx-include=&quot;this&quot;&gt;  &lt;!-- 'this' is redundant --&gt;
    &lt;input name=&quot;field1&quot; value=&quot;yes&quot; /&gt;
&lt;/form&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="debugging-form-data">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-form-data">#</doc-anchor-trigger>
        <span>Debugging Form Data</span>
    </h4>
</doc-anchor-target>
<p>Add a listener that logs exactly what htmx will send:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    if (event.detail.verb !== 'get') {
        console.log('Form submission data:', {
            method: event.detail.verb.toUpperCase(),
            path: event.detail.path,
            parameters: event.detail.parameters,
            // Show which element triggered submission
            trigger: event.detail.elt.tagName + 
                    (event.detail.elt.id ? '#' + event.detail.elt.id : '') +
                    (event.detail.elt.name ? '[name=' + event.detail.elt.name + ']' : '')
        });
    }
});</code></pre>
</doc-codeblock></div>
<p>This logs parameters before the request is sent, showing exactly what data htmx collected.</p>
<doc-anchor-target id="2155-anti-forgery-token-failures">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2155-anti-forgery-token-failures">#</doc-anchor-trigger>
        <span>21.5.5 Anti-Forgery Token Failures</span>
    </h3>
</doc-anchor-target>
<p>Anti-forgery token issues cause cryptic 400 errors that give little indication of the actual problem.</p>
<doc-anchor-target id="symptoms">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#symptoms">#</doc-anchor-trigger>
        <span>Symptoms</span>
    </h4>
</doc-anchor-target>
<p><strong>Network Tab Shows</strong>:</p>
<ul>
<li>Status: 400 Bad Request</li>
<li>Response may contain: &quot;The required antiforgery cookie is not present&quot; or &quot;The antiforgery token could not be decrypted&quot;</li>
</ul>
<p><strong>Console Shows</strong>:</p>
<ul>
<li><code v-pre>htmx:responseError</code> with status 400</li>
<li>No JavaScript errors (this is a server-side rejection)</li>
</ul>
<p><strong>Server Logs Show</strong>:</p>
<ul>
<li>&quot;Antiforgery token validation failed&quot;</li>
<li>&quot;The required antiforgery form field &#x27;__RequestVerificationToken&#x27; is not present&quot;</li>
</ul>
<doc-anchor-target id="4-step-diagnostic-process">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#4-step-diagnostic-process">#</doc-anchor-trigger>
        <span>4-Step Diagnostic Process</span>
    </h4>
</doc-anchor-target>
<p><strong>Step 1: Verify Token Exists in Page</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Run in browser console
const token = document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
console.log('Token element:', token);
console.log('Token value:', token?.value?.substring(0, 30) + '...');</code></pre>
</doc-codeblock></div>
<p>If <code v-pre>null</code>, add a form with anti-forgery to your layout:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- In _Layout.cshtml --&gt;
@using Microsoft.AspNetCore.Antiforgery
@inject IAntiforgery Antiforgery

&lt;!-- Hidden form to provide token --&gt;
&lt;form id=&quot;__AntiForgeryForm&quot; method=&quot;post&quot; style=&quot;display:none&quot;&gt;
    @Html.AntiForgeryToken()
&lt;/form&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Step 2: Verify JavaScript Sends Token</strong></p>
<p>Check that your htmx configuration includes the token:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// This should be in your layout or site.js
document.body.addEventListener('htmx:configRequest', function(event) {
    const token = document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
    if (token) {
        event.detail.headers['RequestVerificationToken'] = token.value;
    }
});</code></pre>
</doc-codeblock></div>
<p>Test by adding logging:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:configRequest', function(event) {
    const token = document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
    if (token) {
        event.detail.headers['RequestVerificationToken'] = token.value;
        console.log('Token attached to request');
    } else {
        console.warn('NO TOKEN FOUND - request will fail validation');
    }
});</code></pre>
</doc-codeblock></div>
<p><strong>Step 3: Verify Server Receives Token</strong></p>
<p>Check Network tab, click the failed request, look at Request Headers:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">RequestVerificationToken: CfDJ8...</code></pre>
</doc-codeblock></div>
<p>If missing, the JavaScript isn&#x27;t attaching it. If present, continue to step 4.</p>
<p><strong>Step 4: Verify Server Configuration</strong></p>
<p>Check <code v-pre>Program.cs</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">builder.Services.AddAntiforgery(options =&gt;
{
    // This name MUST match what JavaScript sends
    options.HeaderName = &quot;RequestVerificationToken&quot;;
});</code></pre>
</doc-codeblock></div>
<p>Check handler has attribute:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">[ValidateAntiForgeryToken]
public async Task&lt;IActionResult&gt; OnPostCreateAsync(...)</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="complete-solution-implementation">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#complete-solution-implementation">#</doc-anchor-trigger>
        <span>Complete Solution Implementation</span>
    </h4>
</doc-anchor-target>
<p><strong>_Layout.cshtml</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@using Microsoft.AspNetCore.Antiforgery
@inject IAntiforgery Antiforgery

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;!-- head content --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Provide anti-forgery token for htmx requests --&gt;
    &lt;form id=&quot;__AntiForgeryForm&quot; method=&quot;post&quot; style=&quot;display:none&quot;&gt;
        @Html.AntiForgeryToken()
    &lt;/form&gt;
    
    &lt;!-- page content --&gt;
    @RenderBody()
    
    &lt;script src=&quot;~/lib/htmx/htmx.min.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        // Attach anti-forgery token to all htmx requests
        document.body.addEventListener('htmx:configRequest', function(event) {
            // Only add for non-GET requests
            if (event.detail.verb === 'get') return;
            
            const token = document.querySelector('input[name=&quot;__RequestVerificationToken&quot;]');
            if (token) {
                event.detail.headers['RequestVerificationToken'] = token.value;
            } else {
                console.error('Anti-forgery token not found. POST/PUT/DELETE will fail.');
            }
        });
    &lt;/script&gt;
    
    @await RenderSectionAsync(&quot;Scripts&quot;, required: false)
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Program.cs</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">builder.Services.AddAntiforgery(options =&gt;
{
    options.HeaderName = &quot;RequestVerificationToken&quot;;
});</code></pre>
</doc-codeblock></div>
<p><strong>Handler</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">[ValidateAntiForgeryToken]
public async Task&lt;IActionResult&gt; OnPostCreateAsync(string name)
{
    // Token validated automatically by attribute
    // Handler only executes if validation passes
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2156-historyback-button-issues">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2156-historyback-button-issues">#</doc-anchor-trigger>
        <span>21.5.6 History/Back Button Issues</span>
    </h3>
</doc-anchor-target>
<p>htmx can integrate with browser history, but misconfiguration leads to confusing back-button behavior.</p>
<doc-anchor-target id="common-problems">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-problems">#</doc-anchor-trigger>
        <span>Common Problems</span>
    </h4>
</doc-anchor-target>
<p><strong>Stale Content on Back Button</strong></p>
<p>After navigating forward with htmx, pressing back shows outdated content.</p>
<p><strong>URL Doesn&#x27;t Update</strong></p>
<p>User applies filters but the URL stays the same, making the view non-bookmarkable.</p>
<p><strong>Scroll Position Lost</strong></p>
<p>After navigating back, page scrolls to top instead of previous position.</p>
<doc-anchor-target id="debugging-history-events">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-history-events">#</doc-anchor-trigger>
        <span>Debugging History Events</span>
    </h4>
</doc-anchor-target>
<p>htmx fires events during history operations:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">// Log history push
document.body.addEventListener('htmx:pushedIntoHistory', function(event) {
    console.log('History push:', event.detail.path);
});

// Log history restore attempts
document.body.addEventListener('htmx:historyRestore', function(event) {
    console.log('History restore:', {
        path: event.detail.path,
        item: event.detail.item
    });
});

// Log history cache misses
document.body.addEventListener('htmx:historyCacheMiss', function(event) {
    console.log('History cache miss:', event.detail.path);
});

// Log history cache errors
document.body.addEventListener('htmx:historyCacheMissLoad', function(event) {
    console.log('Loading page for cache miss:', event.detail.path);
});</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="demo-filters-not-preserved-on-back-button">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#demo-filters-not-preserved-on-back-button">#</doc-anchor-trigger>
        <span>Demo: Filters Not Preserved on Back Button</span>
    </h4>
</doc-anchor-target>
<p><strong>Symptom</strong>: Search for &quot;AC/DC&quot;, results appear. Click an artist to view details. Press back. Search is gone, showing all artists.</p>
<p><strong>The Code</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Search input without hx-push-url --&gt;
&lt;input type=&quot;text&quot; 
       name=&quot;search&quot;
       hx-get=&quot;/Artists?handler=List&quot;
       hx-trigger=&quot;keyup changed delay:300ms&quot;
       hx-target=&quot;#artist-list&quot;&gt;

&lt;!-- Artist link without history support --&gt;
&lt;a hx-get=&quot;/Artists?handler=Detail&amp;id=1&quot;
   hx-target=&quot;#content&quot;&gt;
    AC/DC
&lt;/a&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Debug Steps</strong>:</p>
<ol>
<li>Type &quot;AC/DC&quot; in search - URL stays <code v-pre>/Artists</code></li>
<li>Click artist - URL stays <code v-pre>/Artists</code></li>
<li>Press back - URL still <code v-pre>/Artists</code>, content jumps to all artists</li>
<li>No <code v-pre>htmx:pushedIntoHistory</code> events in console</li>
</ol>
<p><strong>Root Cause</strong>: Neither the search nor the detail link uses <code v-pre>hx-push-url</code>, so the browser history never records the filtered state.</p>
<p><strong>Solution</strong>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Search with URL push --&gt;
&lt;input type=&quot;text&quot; 
       name=&quot;search&quot;
       hx-get=&quot;/Artists?handler=List&quot;
       hx-trigger=&quot;keyup changed delay:300ms&quot;
       hx-target=&quot;#artist-list&quot;
       hx-push-url=&quot;true&quot;&gt;

&lt;!-- Detail link with URL push --&gt;
&lt;a hx-get=&quot;/Artists?handler=Detail&amp;id=1&quot;
   hx-target=&quot;#content&quot;
   hx-push-url=&quot;true&quot;&gt;
    AC/DC
&lt;/a&gt;

&lt;!-- Mark the content area for history restoration --&gt;
&lt;div id=&quot;content&quot; hx-history-elt&gt;
    &lt;!-- Content that should be restored on back button --&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>Now the URL updates with each action, and back button restores previous content.</p>
<p><strong>Additional Fix - Server-Side Support</strong>:</p>
<p>The server must handle direct navigation to filtered URLs:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">public async Task&lt;IActionResult&gt; OnGetAsync(string? search)
{
    // Load data with filter
    Artists = await _artistService.SearchAsync(search);
    
    // For htmx requests, return partial
    if (Request.Headers.ContainsKey(&quot;HX-Request&quot;))
    {
        return Partial(&quot;Artists/_ArtistList&quot;, this);
    }
    
    // For direct navigation (including back button cache miss), return full page
    return Page();
}</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="216-debugging-hyperscript">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#216-debugging-hyperscript">#</doc-anchor-trigger>
        <span>21.6 Debugging Hyperscript</span>
    </h2>
</doc-anchor-target>
<p>Hyperscript provides client-side interactivity through a human-readable syntax. When Hyperscript doesn&#x27;t work as expected, debugging requires understanding its unique error reporting and syntax rules.</p>
<doc-anchor-target id="2161-hyperscript-syntax-errors">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2161-hyperscript-syntax-errors">#</doc-anchor-trigger>
        <span>21.6.1 Hyperscript Syntax Errors</span>
    </h3>
</doc-anchor-target>
<p>Hyperscript has its own syntax distinct from JavaScript. Common mistakes come from mixing the two.</p>
<doc-anchor-target id="javascript-syntax-in-hyperscript">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#javascript-syntax-in-hyperscript">#</doc-anchor-trigger>
        <span>JavaScript Syntax in Hyperscript</span>
    </h4>
</doc-anchor-target>
<p><strong>Wrong</strong>: Using JavaScript method calls</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button _=&quot;on click document.getElementById('modal').classList.add('open')&quot;&gt;
    Open Modal
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p>Hyperscript doesn&#x27;t understand JavaScript syntax. This silently fails or produces parsing errors.</p>
<p><strong>Correct</strong>: Using Hyperscript syntax</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button _=&quot;on click add .open to #modal&quot;&gt;
    Open Modal
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Wrong</strong>: JavaScript conditionals</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on load if (count &gt; 0) { show #results }&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Correct</strong>: Hyperscript conditionals</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on load if count &gt; 0 show #results&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Wrong</strong>: JavaScript string concatenation</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button _=&quot;on click set #output.innerHTML to 'Count: ' + count&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Correct</strong>: Hyperscript string interpolation</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button _=&quot;on click set #output's innerHTML to `Count: ${count}`&quot;&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="missing-then-between-actions">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#missing-then-between-actions">#</doc-anchor-trigger>
        <span>Missing &#x27;then&#x27; Between Actions</span>
    </h4>
</doc-anchor-target>
<p>Hyperscript commands must be chained with <code v-pre>then</code>:</p>
<p><strong>Wrong</strong>: Missing connectors</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on load add .visible to me wait 2s remove .visible from me&quot;&gt;</code></pre>
</doc-codeblock></div>
<p>This might partially work or fail unpredictably.</p>
<p><strong>Correct</strong>: Chain with &#x27;then&#x27;</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on load add .visible to me then wait 2s then remove .visible from me&quot;&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="wrong-element-references">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#wrong-element-references">#</doc-anchor-trigger>
        <span>Wrong Element References</span>
    </h4>
</doc-anchor-target>
<p>Hyperscript has specific syntax for referencing elements:</p>
<p><strong>Wrong</strong>: JavaScript-style element access</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;button _=&quot;on click set document.querySelector('#count').textContent to '5'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Correct</strong>: Hyperscript element references</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- By ID --&gt;
&lt;button _=&quot;on click set #count's textContent to '5'&quot;&gt;

&lt;!-- By class (first match) --&gt;
&lt;button _=&quot;on click set .counter's textContent to '5'&quot;&gt;

&lt;!-- Relative to current element --&gt;
&lt;button _=&quot;on click set the closest &lt;div/&gt;'s textContent to '5'&quot;&gt;

&lt;!-- Using 'me' for self-reference --&gt;
&lt;button _=&quot;on click add .clicked to me&quot;&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="enabling-hyperscript-debug-mode">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#enabling-hyperscript-debug-mode">#</doc-anchor-trigger>
        <span>Enabling Hyperscript Debug Mode</span>
    </h4>
</doc-anchor-target>
<p>Hyperscript can output debug information:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;script src=&quot;~/lib/hyperscript/_hyperscript.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
    // Enable debug mode
    _hyperscript.config.debug = true;
&lt;/script&gt;</code></pre>
</doc-codeblock></div>
<p>With debug mode enabled, Hyperscript logs parsing information and execution details to the console.</p>
<p>You can also add inline debugging:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Use 'log' to output values during execution --&gt;
&lt;button _=&quot;on click 
             log 'Button clicked'
             set x to #count's textContent
             log `Current count: ${x}`
             set #count's textContent to (x as Int) + 1
             log 'Count incremented'&quot;&gt;
    Increment
&lt;/button&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2162-hyperscript-event-issues">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2162-hyperscript-event-issues">#</doc-anchor-trigger>
        <span>21.6.2 Hyperscript Event Issues</span>
    </h3>
</doc-anchor-target>
<p>Events in Hyperscript follow specific patterns that differ from JavaScript event handling.</p>
<doc-anchor-target id="event-bubbling-considerations">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#event-bubbling-considerations">#</doc-anchor-trigger>
        <span>Event Bubbling Considerations</span>
    </h4>
</doc-anchor-target>
<p>By default, Hyperscript&#x27;s <code v-pre>on click</code> triggers when the element or any descendant is clicked:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Clicking the span also triggers the div's handler --&gt;
&lt;div _=&quot;on click add .selected to me&quot;&gt;
    &lt;span&gt;Click me&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>To handle only direct clicks:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Only trigger if the click target is specifically this div --&gt;
&lt;div _=&quot;on click if event.target is me add .selected to me&quot;&gt;
    &lt;span&gt;This click won't trigger the handler&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="being-specific-about-event-targets">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#being-specific-about-event-targets">#</doc-anchor-trigger>
        <span>Being Specific About Event Targets</span>
    </h4>
</doc-anchor-target>
<p>Filter events to specific child elements:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Only respond to clicks on buttons within this container --&gt;
&lt;div _=&quot;on click from &lt;button/&gt; in me
          log 'Button clicked'
          set the target's textContent to 'Clicked!'&quot;&gt;
    &lt;button&gt;Click me&lt;/button&gt;
    &lt;button&gt;Or me&lt;/button&gt;
    &lt;span&gt;Clicking here does nothing&lt;/span&gt;
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>The <code v-pre>from &lt;selector/&gt; in me</code> pattern limits which descendant elements trigger the handler.</p>
<doc-anchor-target id="adding-logging-to-hyperscript">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#adding-logging-to-hyperscript">#</doc-anchor-trigger>
        <span>Adding Logging to Hyperscript</span>
    </h4>
</doc-anchor-target>
<p>The <code v-pre>log</code> command outputs to the console:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Simple logging --&gt;
&lt;button _=&quot;on click log 'Clicked!'&quot;&gt;Test&lt;/button&gt;

&lt;!-- Log variables --&gt;
&lt;button _=&quot;on click
             set count to #counter's textContent as Int
             log `Count is ${count}`
             if count &gt; 10
                 log 'Count exceeds threshold'
             end&quot;&gt;
    Check Count
&lt;/button&gt;

&lt;!-- Log event details --&gt;
&lt;div _=&quot;on click
          log event
          log event.target
          log event.clientX
          log event.clientY&quot;&gt;
    Click anywhere
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>For complex debugging, create a verbose handler:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form _=&quot;on submit
           log '=== Form Submit Debug ==='
           log `Target: ${event.target.id}`
           log `Form data: ${new FormData(me)}`
           -- Let the form continue
       &quot;&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2163-htmx-event-integration">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2163-htmx-event-integration">#</doc-anchor-trigger>
        <span>21.6.3 htmx Event Integration</span>
    </h3>
</doc-anchor-target>
<p>Hyperscript can listen to htmx events, enabling coordination between htmx requests and client-side behavior.</p>
<doc-anchor-target id="correct-event-name-casing">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#correct-event-name-casing">#</doc-anchor-trigger>
        <span>Correct Event Name Casing</span>
    </h4>
</doc-anchor-target>
<p>htmx event names use camelCase after the colon. Getting the case wrong causes silent failures:</p>
<p><strong>Wrong</strong>: All lowercase</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on htmx:afterswap log 'swapped'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Wrong</strong>: All caps</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on htmx:AFTERSWAP log 'swapped'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Correct</strong>: Proper camelCase</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on htmx:afterSwap log 'swapped'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p>Common htmx events to listen for:</p>
<ul>
<li><code v-pre>htmx:configRequest</code> - Before request is configured</li>
<li><code v-pre>htmx:beforeRequest</code> - Just before request is sent</li>
<li><code v-pre>htmx:afterRequest</code> - After response received</li>
<li><code v-pre>htmx:beforeSwap</code> - Before content is swapped</li>
<li><code v-pre>htmx:afterSwap</code> - After content is swapped</li>
<li><code v-pre>htmx:afterSettle</code> - After settling (scripts run, etc.)</li>
<li><code v-pre>htmx:responseError</code> - Server returned error status</li>
</ul>
<doc-anchor-target id="complete-example-form-with-multiple-htmx-event-handlers">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#complete-example-form-with-multiple-htmx-event-handlers">#</doc-anchor-trigger>
        <span>Complete Example: Form with Multiple htmx Event Handlers</span>
    </h4>
</doc-anchor-target>
<p>This example shows a form with full htmx lifecycle handling in Hyperscript:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form id=&quot;artist-form&quot;
      hx-post=&quot;/Artists?handler=Create&quot;
      hx-target=&quot;#result&quot;
      _=&quot;on htmx:beforeRequest
             -- Disable form during submission
             add @disabled to &lt;input/&gt; in me
             add @disabled to &lt;button/&gt; in me
             add .submitting to me
             set #submit-btn's textContent to 'Saving...'
             log 'Form submission started'
         
         on htmx:afterRequest
             -- Re-enable form
             remove @disabled from &lt;input/&gt; in me
             remove @disabled from &lt;button/&gt; in me
             remove .submitting from me
             set #submit-btn's textContent to 'Save'
             log `Request completed with status: ${event.detail.successful}`
         
         on htmx:responseError
             -- Show error state
             add .error to me
             set #error-message's textContent to 'Failed to save. Please try again.'
             show #error-message
             log `Error: ${event.detail.xhr.status}`
         
         on htmx:afterSwap
             -- Success! Close form or show confirmation
             if event.detail.successful
                 add .success to me
                 wait 1s
                 send closeModal to #modal
             end
             log 'Content swapped'&quot;&gt;
    
    &lt;div id=&quot;error-message&quot; style=&quot;display: none;&quot; class=&quot;error-text&quot;&gt;&lt;/div&gt;
    
    &lt;label&gt;
        Artist Name
        &lt;input type=&quot;text&quot; name=&quot;name&quot; required /&gt;
    &lt;/label&gt;
    
    &lt;button type=&quot;submit&quot; id=&quot;submit-btn&quot;&gt;Save&lt;/button&gt;
&lt;/form&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="debugging-integration-issues">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debugging-integration-issues">#</doc-anchor-trigger>
        <span>Debugging Integration Issues</span>
    </h4>
</doc-anchor-target>
<p>When Hyperscript doesn&#x27;t respond to htmx events:</p>
<p><strong>1. Verify the event fires</strong></p>
<p>Add a JavaScript listener to confirm htmx fires the event:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">document.body.addEventListener('htmx:afterSwap', function(e) {
    console.log('htmx:afterSwap fired', e.detail);
});</code></pre>
</doc-codeblock></div>
<p>If this logs but Hyperscript doesn&#x27;t respond, the issue is in Hyperscript.</p>
<p><strong>2. Check event name spelling and case</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- Add logging to verify Hyperscript receives the event --&gt;
&lt;div _=&quot;on htmx:afterSwap log 'Hyperscript received afterSwap'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>3. Verify element receives the event</strong></p>
<p>htmx events bubble up from the target element. If your Hyperscript is on an unrelated element, it won&#x27;t receive the event:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- This won't work - #other-div isn't in the event path --&gt;
&lt;div id=&quot;other-div&quot; _=&quot;on htmx:afterSwap log 'Received'&quot;&gt;&lt;/div&gt;

&lt;div id=&quot;content&quot; hx-get=&quot;/load&quot; hx-trigger=&quot;click&quot;&gt;
    Load Content
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p>Fix by listening on body or a common ancestor:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;body _=&quot;on htmx:afterSwap log 'Swap occurred somewhere'&quot;&gt;</code></pre>
</doc-codeblock></div>
<p>Or target the specific element:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div id=&quot;content&quot; 
     hx-get=&quot;/load&quot; 
     hx-trigger=&quot;click&quot;
     _=&quot;on htmx:afterSwap log 'My content was swapped'&quot;&gt;
    Load Content
&lt;/div&gt;</code></pre>
</doc-codeblock></div>
<p><strong>4. Check event.detail properties</strong></p>
<p>Different events provide different details:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on htmx:afterSwap
          log event.detail.target
          log event.detail.xhr
          log event.detail.successful&quot;&gt;</code></pre>
</doc-codeblock></div>
<p>Use <code v-pre>log event.detail</code> to see all available properties:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;div _=&quot;on htmx:afterSwap log event.detail&quot;&gt;</code></pre>
</doc-codeblock></div>
<p>This outputs the entire detail object to the console, showing what data is available.</p>
<doc-anchor-target id="217-debugging-workflow-a-systematic-approach">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#217-debugging-workflow-a-systematic-approach">#</doc-anchor-trigger>
        <span>21.7 Debugging Workflow: A Systematic Approach</span>
    </h2>
</doc-anchor-target>
<p>Random debugging wastes time. Clicking around and changing things hoping something works is inefficient and often introduces new problems. A systematic approach finds root causes faster and produces reliable fixes.</p>
<doc-anchor-target id="2171-the-five-step-debug-process">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2171-the-five-step-debug-process">#</doc-anchor-trigger>
        <span>21.7.1 The Five-Step Debug Process</span>
    </h3>
</doc-anchor-target>
<p>This process applies to any htmx issue, from simple attribute typos to complex timing problems.</p>
<doc-anchor-target id="step-1-reproduce-consistently">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-reproduce-consistently">#</doc-anchor-trigger>
        <span>Step 1: Reproduce Consistently</span>
    </h4>
</doc-anchor-target>
<p>Before debugging, you need a reliable way to trigger the bug.</p>
<p><strong>Document the exact steps:</strong></p>
<ol>
<li>Starting state (fresh page load? after specific actions?)</li>
<li>User action (what exactly do you click/type?)</li>
<li>Expected result (what should happen?)</li>
<li>Actual result (what happens instead?)</li>
</ol>
<p><strong>Note the environment:</strong></p>
<ul>
<li>Browser and version (Chrome 120, Firefox 121, etc.)</li>
<li>Development or production?</li>
<li>Authenticated or anonymous user?</li>
<li>Any browser extensions that might interfere?</li>
</ul>
<p><strong>Check for intermittent behavior:</strong></p>
<ul>
<li>Does it happen every time?</li>
<li>Only the first time? Only after the first time?</li>
<li>Only with certain data?</li>
</ul>
<p>A bug you can&#x27;t reproduce is a bug you can&#x27;t fix with confidence. Spend time here until you have reliable reproduction steps.</p>
<doc-anchor-target id="step-2-isolate-the-layer">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-isolate-the-layer">#</doc-anchor-trigger>
        <span>Step 2: Isolate the Layer</span>
    </h4>
</doc-anchor-target>
<p>htmx applications have multiple layers where problems can occur. Identify which layer contains the bug:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT SIDE                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  User Interface â”‚ â†’ â”‚  htmx/Browser   â”‚                 â”‚
â”‚  â”‚  (HTML/CSS)     â”‚   â”‚  (Attributes,   â”‚                 â”‚
â”‚  â”‚                 â”‚   â”‚   Events, DOM)  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ HTTP Request
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NETWORK                                                    â”‚
â”‚  (Request headers, Response headers, Status codes)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVER SIDE                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Razor Pages    â”‚ â†’ â”‚  Services/      â”‚                 â”‚
â”‚  â”‚  (Handlers,     â”‚   â”‚  Database       â”‚                 â”‚
â”‚  â”‚   Partials)     â”‚   â”‚                 â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
</doc-codeblock></div>
<p><strong>Decision tree for isolation:</strong></p>
<ol>
<li><p><strong>Is a network request made?</strong> (Check Network tab)</p>
<ul>
<li>No â†’ Problem is client-side (htmx attributes, triggers, JavaScript)</li>
<li>Yes â†’ Continue to step 2</li>
</ul>
</li>
<li><p><strong>What&#x27;s the response status?</strong></p>
<ul>
<li>4xx/5xx â†’ Problem is server-side (handler, validation, database)</li>
<li>200 â†’ Continue to step 3</li>
</ul>
</li>
<li><p><strong>Is the response content correct?</strong></p>
<ul>
<li>No â†’ Problem is server-side (wrong partial, model issue)</li>
<li>Yes â†’ Continue to step 4</li>
</ul>
</li>
<li><p><strong>Does the content appear in the right place?</strong></p>
<ul>
<li>No â†’ Problem is client-side (hx-target, hx-swap)</li>
<li>Yes â†’ Problem might be CSS or content issue</li>
</ul>
</li>
</ol>
<doc-anchor-target id="step-3-gather-evidence">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-3-gather-evidence">#</doc-anchor-trigger>
        <span>Step 3: Gather Evidence</span>
    </h4>
</doc-anchor-target>
<p>Once you know which layer to focus on, collect relevant data:</p>
<p><strong>Client-side evidence:</strong></p>
<ul>
<li>Console errors and warnings</li>
<li>htmx event log (<code v-pre>htmx.logAll()</code> output)</li>
<li>DOM state before and after (Elements tab screenshots)</li>
<li>Attribute values on triggering element</li>
</ul>
<p><strong>Network evidence:</strong></p>
<ul>
<li>Full URL including query parameters</li>
<li>Request headers (especially HX-* headers)</li>
<li>Response status code</li>
<li>Response headers</li>
<li>Response body content</li>
</ul>
<p><strong>Server-side evidence:</strong></p>
<ul>
<li>Application logs</li>
<li>Debugger output (breakpoint values)</li>
<li>Database query results</li>
<li>Exception details if any</li>
</ul>
<p>Keep notes or screenshots. You&#x27;ll need to compare before and after states.</p>
<doc-anchor-target id="step-4-form-and-test-hypothesis">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-4-form-and-test-hypothesis">#</doc-anchor-trigger>
        <span>Step 4: Form and Test Hypothesis</span>
    </h4>
</doc-anchor-target>
<p>Based on the evidence, form a specific hypothesis about what&#x27;s wrong.</p>
<p><strong>Good hypothesis:</strong> &quot;The Cancel button&#x27;s hx-target points to #artist-row-1, but the Edit swap changed that element&#x27;s ID to #artist-edit-1&quot;</p>
<p><strong>Bad hypothesis:</strong> &quot;Something&#x27;s wrong with htmx&quot;</p>
<p>Test your hypothesis with a minimal change:</p>
<ul>
<li>If you think the ID is wrong, change just the ID</li>
<li>If you think the handler name is wrong, fix just the handler name</li>
<li>Don&#x27;t change multiple things at once</li>
</ul>
<p>If the fix doesn&#x27;t work, your hypothesis was wrong. Return to Step 3 and gather more evidence.</p>
<doc-anchor-target id="step-5-fix-and-verify">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-5-fix-and-verify">#</doc-anchor-trigger>
        <span>Step 5: Fix and Verify</span>
    </h4>
</doc-anchor-target>
<p>When you find the fix:</p>
<ol>
<li><strong>Implement the fix properly</strong> - Don&#x27;t just patch the symptom</li>
<li><strong>Test the original reproduction steps</strong> - Does the bug still occur?</li>
<li><strong>Test related functionality</strong> - Did you break anything else?</li>
<li><strong>Test edge cases</strong> - Empty data, special characters, rapid clicks</li>
</ol>
<p>Document what you learned. If this bug could happen elsewhere in the codebase, check those places too.</p>
<doc-anchor-target id="2172-debug-scenario-walkthrough">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2172-debug-scenario-walkthrough">#</doc-anchor-trigger>
        <span>21.7.2 Debug Scenario Walkthrough</span>
    </h3>
</doc-anchor-target>
<p>Let&#x27;s walk through a complete debugging session using the Chinook Dashboard.</p>
<doc-anchor-target id="the-bug-report">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#the-bug-report">#</doc-anchor-trigger>
        <span>The Bug Report</span>
    </h4>
</doc-anchor-target>
<p><strong>Reported behavior:</strong> &quot;When I edit an artist name and click Save, the old name still shows.&quot;</p>
<doc-anchor-target id="step-1-reproduce-consistently-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-reproduce-consistently-1">#</doc-anchor-trigger>
        <span>Step 1: Reproduce Consistently</span>
    </h4>
</doc-anchor-target>
<p><strong>Reproduction steps:</strong></p>
<ol>
<li>Navigate to /Artists</li>
<li>Click Edit on any artist (e.g., &quot;AC/DC&quot;)</li>
<li>Change the name to &quot;AC/DC Updated&quot;</li>
<li>Click Save</li>
<li><strong>Expected:</strong> Row shows &quot;AC/DC Updated&quot;</li>
<li><strong>Actual:</strong> Row shows &quot;AC/DC&quot; (original name)</li>
</ol>
<p><strong>Environment:</strong> Chrome 120, development mode, localhost:5001</p>
<p><strong>Consistency:</strong> Happens every time, with any artist.</p>
<doc-anchor-target id="step-2-isolate-the-layer-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-isolate-the-layer-1">#</doc-anchor-trigger>
        <span>Step 2: Isolate the Layer</span>
    </h4>
</doc-anchor-target>
<p><strong>Check 1: Is a request made?</strong></p>
<p>Open Network tab, filter to Fetch/XHR, reproduce the bug.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">POST /Artists?handler=Update&amp;id=1    200    text/html    245 B    23ms</code></pre>
</doc-codeblock></div>
<p>Yes, request is made. Status 200 means server processed it successfully.</p>
<p><strong>Check 2: Is the response correct?</strong></p>
<p>Click the request, view Response tab:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;tr id=&quot;artist-row-1&quot;&gt;
    &lt;td&gt;AC/DC Updated&lt;/td&gt;
    &lt;td&gt;10 albums&lt;/td&gt;
    &lt;td&gt;
        &lt;button hx-get=&quot;/Artists?handler=Edit&amp;amp;id=1&quot; ...&gt;Edit&lt;/button&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p>The response contains &quot;AC/DC Updated&quot; - the correct, updated name. Server is working correctly.</p>
<p><strong>Conclusion:</strong> Problem is client-side. The server returns correct data, but it&#x27;s not displaying.</p>
<doc-anchor-target id="step-3-gather-evidence-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-3-gather-evidence-1">#</doc-anchor-trigger>
        <span>Step 3: Gather Evidence</span>
    </h4>
</doc-anchor-target>
<p><strong>htmx event log:</strong></p>
<p>Enable logging and reproduce:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">htmx.logAll();</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">htmx:configRequest {verb: &quot;post&quot;, path: &quot;/Artists?handler=Update&amp;id=1&quot;, ...}
htmx:beforeRequest {...}
htmx:afterRequest {successful: true, ...}
htmx:beforeSwap {target: tr#artist-edit-1, ...}
htmx:afterSwap {target: tr#artist-edit-1, ...}</code></pre>
</doc-codeblock></div>
<p>Notice: <code v-pre>beforeSwap</code> shows <code v-pre>target: tr#artist-edit-1</code></p>
<p><strong>DOM inspection before Save:</strong></p>
<p>Check Elements tab for the edit form:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;tr id=&quot;artist-edit-1&quot;&gt;
    &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=1&quot;
          hx-target=&quot;#artist-row-1&quot;
          hx-swap=&quot;outerHTML&quot;&gt;
        &lt;input name=&quot;name&quot; value=&quot;AC/DC Updated&quot; /&gt;
        &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;
    &lt;/form&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p>The form&#x27;s <code v-pre>hx-target</code> is <code v-pre>#artist-row-1</code>.</p>
<p><strong>DOM inspection - search for artist-row-1:</strong></p>
<p>Search in Elements tab: &quot;artist-row-1&quot; - <strong>Not found</strong></p>
<p>The edit form replaced <code v-pre>#artist-row-1</code> with <code v-pre>#artist-edit-1</code>. The target no longer exists.</p>
<doc-anchor-target id="step-4-form-and-test-hypothesis-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-4-form-and-test-hypothesis-1">#</doc-anchor-trigger>
        <span>Step 4: Form and Test Hypothesis</span>
    </h4>
</doc-anchor-target>
<p><strong>Hypothesis:</strong> The form targets <code v-pre>#artist-row-1</code>, but that element doesn&#x27;t exist (it was replaced by <code v-pre>#artist-edit-1</code>). htmx can&#x27;t find the target, so it uses a fallback or fails silently.</p>
<p><strong>Test:</strong> Check htmx behavior for missing targets.</p>
<p>Looking at htmx documentation: when a target isn&#x27;t found, htmx falls back to the element that triggered the request (the form itself). But the form is inside <code v-pre>#artist-edit-1</code>, so the swap replaces content inside the edit row, not the edit row itself.</p>
<p>Let&#x27;s verify by checking what actually happened:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- After Save, the DOM shows: --&gt;
&lt;tr id=&quot;artist-edit-1&quot;&gt;
    &lt;tr id=&quot;artist-row-1&quot;&gt;  &lt;!-- Nested row! Invalid HTML --&gt;
        &lt;td&gt;AC/DC Updated&lt;/td&gt;
        ...
    &lt;/tr&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p>The response was inserted inside the edit row, creating invalid nested table rows. The browser may render this unexpectedly or the original edit form content may still be visible.</p>
<p><strong>Hypothesis confirmed:</strong> Target mismatch causes incorrect swap location.</p>
<doc-anchor-target id="step-5-fix-and-verify-1">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-5-fix-and-verify-1">#</doc-anchor-trigger>
        <span>Step 5: Fix and Verify</span>
    </h4>
</doc-anchor-target>
<p><strong>The fix:</strong> Keep the ID consistent, or use a stable target.</p>
<p><strong>Option A: Same ID throughout</strong></p>
<p>Edit row partial keeps the original ID:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;!-- _ArtistEditRow.cshtml --&gt;
&lt;tr id=&quot;artist-row-@Model.Id&quot;&gt;
    &lt;form hx-post=&quot;/Artists?handler=Update&amp;id=@Model.Id&quot;
          hx-target=&quot;#artist-row-@Model.Id&quot;
          hx-swap=&quot;outerHTML&quot;&gt;
        ...
    &lt;/form&gt;
&lt;/tr&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Option B: Use relative target</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">&lt;form hx-post=&quot;/Artists?handler=Update&amp;id=@Model.Id&quot;
      hx-target=&quot;closest tr&quot;
      hx-swap=&quot;outerHTML&quot;&gt;</code></pre>
</doc-codeblock></div>
<p><strong>Verification:</strong></p>
<ol>
<li>Edit artist, change name, click Save - <span class="docs-emoji">&#x2705;</span> Shows updated name</li>
<li>Edit same artist again - <span class="docs-emoji">&#x2705;</span> Edit form appears</li>
<li>Edit different artist - <span class="docs-emoji">&#x2705;</span> Works correctly</li>
<li>Cancel edit - <span class="docs-emoji">&#x2705;</span> Returns to view mode</li>
<li>Rapid edit/save/edit - <span class="docs-emoji">&#x2705;</span> No issues</li>
</ol>
<p><strong>Root cause documented:</strong> When entering edit mode, the row ID changed from <code v-pre>artist-row-X</code> to <code v-pre>artist-edit-X</code>. The save form targeted the original ID, which no longer existed. Fix: maintain consistent IDs or use relative selectors.</p>
<doc-anchor-target id="2173-creating-a-debug-page">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2173-creating-a-debug-page">#</doc-anchor-trigger>
        <span>21.7.3 Creating a Debug Page</span>
    </h3>
</doc-anchor-target>
<p>A dedicated debug page helps test htmx behavior in isolation. Build one into your development environment.</p>
<doc-anchor-target id="debug-page-model">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debug-page-model">#</doc-anchor-trigger>
        <span>Debug Page Model</span>
    </h4>
</doc-anchor-target>
<p><strong>Pages/Debug/Index.cshtml.cs</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
using System.Text.Json;

namespace ChinookDashboard.Pages.Debug;

public class IndexModel : PageModel
{
    private readonly ILogger&lt;IndexModel&gt; _logger;
    private readonly IWebHostEnvironment _environment;

    public IndexModel(ILogger&lt;IndexModel&gt; logger, IWebHostEnvironment environment)
    {
        _logger = logger;
        _environment = environment;
    }

    public Dictionary&lt;string, string&gt; HtmxHeaders { get; set; } = new();
    public Dictionary&lt;string, string&gt; AllHeaders { get; set; } = new();
    public string RequestInfo { get; set; } = &quot;&quot;;

    public IActionResult OnGet()
    {
        // Only allow in development
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        CaptureRequestInfo();
        return Page();
    }

    public IActionResult OnGetEcho(string? message, int delay = 0)
    {
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        // Simulate slow response for testing
        if (delay &gt; 0)
        {
            Thread.Sleep(Math.Min(delay, 5000)); // Max 5 seconds
        }

        var response = $@&quot;
            &lt;div class='echo-response'&gt;
                &lt;strong&gt;Echo Response&lt;/strong&gt;
                &lt;p&gt;Message: {System.Web.HttpUtility.HtmlEncode(message ?? &quot;(none)&quot;)}&lt;/p&gt;
                &lt;p&gt;Time: {DateTime.Now:HH:mm:ss.fff}&lt;/p&gt;
                &lt;p&gt;Delay: {delay}ms&lt;/p&gt;
            &lt;/div&gt;&quot;;

        return Content(response, &quot;text/html&quot;);
    }

    public IActionResult OnGetHeaders()
    {
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        CaptureRequestInfo();

        var html = &quot;&lt;div class='headers-response'&gt;&quot;;
        html += &quot;&lt;h4&gt;htmx Headers&lt;/h4&gt;&lt;dl&gt;&quot;;
        foreach (var header in HtmxHeaders)
        {
            html += $&quot;&lt;dt&gt;{header.Key}&lt;/dt&gt;&lt;dd&gt;{System.Web.HttpUtility.HtmlEncode(header.Value)}&lt;/dd&gt;&quot;;
        }
        html += &quot;&lt;/dl&gt;&quot;;

        html += &quot;&lt;h4&gt;All Request Headers&lt;/h4&gt;&lt;dl&gt;&quot;;
        foreach (var header in AllHeaders.Take(20))
        {
            html += $&quot;&lt;dt&gt;{header.Key}&lt;/dt&gt;&lt;dd&gt;{System.Web.HttpUtility.HtmlEncode(header.Value)}&lt;/dd&gt;&quot;;
        }
        html += &quot;&lt;/dl&gt;&lt;/div&gt;&quot;;

        return Content(html, &quot;text/html&quot;);
    }

    public IActionResult OnPostFormTest(string? field1, string? field2, int? numericField)
    {
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        _logger.LogDebug(&quot;Form test received: field1={F1}, field2={F2}, numeric={Num}&quot;,
            field1, field2, numericField);

        var html = $@&quot;
            &lt;div class='form-response'&gt;
                &lt;strong&gt;Form Data Received&lt;/strong&gt;
                &lt;dl&gt;
                    &lt;dt&gt;field1&lt;/dt&gt;&lt;dd&gt;{System.Web.HttpUtility.HtmlEncode(field1 ?? &quot;(null)&quot;)}&lt;/dd&gt;
                    &lt;dt&gt;field2&lt;/dt&gt;&lt;dd&gt;{System.Web.HttpUtility.HtmlEncode(field2 ?? &quot;(null)&quot;)}&lt;/dd&gt;
                    &lt;dt&gt;numericField&lt;/dt&gt;&lt;dd&gt;{numericField?.ToString() ?? &quot;(null)&quot;}&lt;/dd&gt;
                &lt;/dl&gt;
                &lt;p&gt;Received at: {DateTime.Now:HH:mm:ss.fff}&lt;/p&gt;
            &lt;/div&gt;&quot;;

        return Content(html, &quot;text/html&quot;);
    }

    public IActionResult OnGetError(int statusCode = 500)
    {
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        return StatusCode(statusCode, $&quot;Simulated {statusCode} error for testing&quot;);
    }

    public IActionResult OnGetOobTest()
    {
        if (!_environment.IsDevelopment())
        {
            return NotFound();
        }

        var html = @&quot;
            &lt;div class='primary-response'&gt;
                &lt;strong&gt;Primary Response&lt;/strong&gt;
                &lt;p&gt;This goes to the main target.&lt;/p&gt;
            &lt;/div&gt;
            &lt;div id='oob-target-1' hx-swap-oob='true'&gt;
                OOB Update 1: Updated at &quot; + DateTime.Now.ToString(&quot;HH:mm:ss&quot;) + @&quot;
            &lt;/div&gt;
            &lt;div id='oob-target-2' hx-swap-oob='innerHTML'&gt;
                OOB Update 2: Content replaced at &quot; + DateTime.Now.ToString(&quot;HH:mm:ss&quot;) + @&quot;
            &lt;/div&gt;&quot;;

        return Content(html, &quot;text/html&quot;);
    }

    private void CaptureRequestInfo()
    {
        // Capture htmx-specific headers
        var htmxHeaderNames = new[] { &quot;HX-Request&quot;, &quot;HX-Target&quot;, &quot;HX-Trigger&quot;, 
            &quot;HX-Trigger-Name&quot;, &quot;HX-Current-URL&quot;, &quot;HX-Prompt&quot;, &quot;HX-Boosted&quot; };

        foreach (var name in htmxHeaderNames)
        {
            if (Request.Headers.TryGetValue(name, out var value))
            {
                HtmxHeaders[name] = value.ToString();
            }
        }

        // Capture all headers
        foreach (var header in Request.Headers)
        {
            AllHeaders[header.Key] = header.Value.ToString();
        }

        // Request info summary
        RequestInfo = JsonSerializer.Serialize(new
        {
            Method = Request.Method,
            Path = Request.Path.ToString(),
            QueryString = Request.QueryString.ToString(),
            IsHttps = Request.IsHttps,
            ContentType = Request.ContentType,
            ContentLength = Request.ContentLength
        }, new JsonSerializerOptions { WriteIndented = true });
    }
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="debug-page-view">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debug-page-view">#</doc-anchor-trigger>
        <span>Debug Page View</span>
    </h4>
</doc-anchor-target>
<p><strong>Pages/Debug/Index.cshtml</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@page
@model ChinookDashboard.Pages.Debug.IndexModel
@{
    ViewData[&quot;Title&quot;] = &quot;htmx Debug Console&quot;;
}

&lt;style&gt;
    .debug-page {
        font-family: system-ui, -apple-system, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    .debug-section {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
    }
    .debug-section h2 {
        margin-top: 0;
        padding-bottom: 10px;
        border-bottom: 1px solid #dee2e6;
    }
    .debug-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
    }
    .result-box {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 15px;
        min-height: 100px;
    }
    .result-box:empty::before {
        content: 'Results will appear here...';
        color: #6c757d;
        font-style: italic;
    }
    .debug-input {
        padding: 8px 12px;
        border: 1px solid #ced4da;
        border-radius: 4px;
        font-size: 14px;
    }
    .debug-btn {
        padding: 8px 16px;
        background: #0d6efd;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }
    .debug-btn:hover {
        background: #0b5ed7;
    }
    .debug-btn.secondary {
        background: #6c757d;
    }
    .debug-btn.danger {
        background: #dc3545;
    }
    .event-log {
        font-family: monospace;
        font-size: 12px;
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 15px;
        border-radius: 4px;
        max-height: 300px;
        overflow-y: auto;
    }
    .event-log .event {
        margin: 2px 0;
        padding: 2px 5px;
    }
    .event-log .event-request { color: #569cd6; }
    .event-log .event-response { color: #4ec9b0; }
    .event-log .event-swap { color: #dcdcaa; }
    .event-log .event-error { color: #f14c4c; }
    .config-display {
        font-family: monospace;
        font-size: 12px;
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        max-height: 200px;
        overflow-y: auto;
    }
    .form-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
    }
    .form-row label {
        min-width: 100px;
    }
    dl {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 5px 15px;
    }
    dt {
        font-weight: bold;
        color: #495057;
    }
    dd {
        margin: 0;
        word-break: break-all;
    }
    .echo-response, .form-response, .headers-response, .primary-response {
        padding: 10px;
        background: #e7f5ff;
        border-radius: 4px;
    }
    .htmx-request {
        opacity: 0.5;
    }
&lt;/style&gt;

&lt;div class=&quot;debug-page&quot;&gt;
    &lt;h1&gt;ðŸ”§ htmx Debug Console&lt;/h1&gt;
    &lt;p&gt;Test htmx features and diagnose issues. &lt;strong&gt;Development only.&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;debug-grid&quot;&gt;
        &lt;!-- Echo Test --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;Echo Test&lt;/h2&gt;
            &lt;p&gt;Test basic htmx GET requests&lt;/p&gt;
            
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;label for=&quot;echo-message&quot;&gt;Message:&lt;/label&gt;
                &lt;input type=&quot;text&quot; 
                       id=&quot;echo-message&quot; 
                       name=&quot;message&quot;
                       class=&quot;debug-input&quot; 
                       placeholder=&quot;Type something...&quot;
                       value=&quot;Hello htmx!&quot; /&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;label for=&quot;echo-delay&quot;&gt;Delay (ms):&lt;/label&gt;
                &lt;input type=&quot;number&quot; 
                       id=&quot;echo-delay&quot; 
                       name=&quot;delay&quot;
                       class=&quot;debug-input&quot; 
                       value=&quot;0&quot;
                       min=&quot;0&quot;
                       max=&quot;5000&quot;
                       style=&quot;width: 100px;&quot; /&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;button class=&quot;debug-btn&quot;
                        hx-get=&quot;/Debug?handler=Echo&quot;
                        hx-include=&quot;#echo-message, #echo-delay&quot;
                        hx-target=&quot;#echo-result&quot;&gt;
                    Send Echo
                &lt;/button&gt;
            &lt;/div&gt;
            &lt;div id=&quot;echo-result&quot; class=&quot;result-box&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Form Test --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;Form Test&lt;/h2&gt;
            &lt;p&gt;Test POST requests with form data&lt;/p&gt;
            
            &lt;form hx-post=&quot;/Debug?handler=FormTest&quot; hx-target=&quot;#form-result&quot;&gt;
                &lt;div class=&quot;form-row&quot;&gt;
                    &lt;label for=&quot;field1&quot;&gt;Field 1:&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;field1&quot; name=&quot;field1&quot; class=&quot;debug-input&quot; value=&quot;Test Value&quot; /&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-row&quot;&gt;
                    &lt;label for=&quot;field2&quot;&gt;Field 2:&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;field2&quot; name=&quot;field2&quot; class=&quot;debug-input&quot; /&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-row&quot;&gt;
                    &lt;label for=&quot;numericField&quot;&gt;Number:&lt;/label&gt;
                    &lt;input type=&quot;number&quot; id=&quot;numericField&quot; name=&quot;numericField&quot; class=&quot;debug-input&quot; value=&quot;42&quot; /&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-row&quot;&gt;
                    &lt;button type=&quot;submit&quot; class=&quot;debug-btn&quot;&gt;Submit Form&lt;/button&gt;
                &lt;/div&gt;
            &lt;/form&gt;
            &lt;div id=&quot;form-result&quot; class=&quot;result-box&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Headers Inspection --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;Headers Inspection&lt;/h2&gt;
            &lt;p&gt;View htmx request headers sent to server&lt;/p&gt;
            
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;button class=&quot;debug-btn&quot;
                        hx-get=&quot;/Debug?handler=Headers&quot;
                        hx-target=&quot;#headers-result&quot;&gt;
                    Inspect Headers
                &lt;/button&gt;
            &lt;/div&gt;
            &lt;div id=&quot;headers-result&quot; class=&quot;result-box&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- OOB Test --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;Out-of-Band Updates&lt;/h2&gt;
            &lt;p&gt;Test OOB swap functionality&lt;/p&gt;
            
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;button class=&quot;debug-btn&quot;
                        hx-get=&quot;/Debug?handler=OobTest&quot;
                        hx-target=&quot;#oob-primary&quot;&gt;
                    Trigger OOB Update
                &lt;/button&gt;
            &lt;/div&gt;
            &lt;div id=&quot;oob-primary&quot; class=&quot;result-box&quot;&gt;Primary target&lt;/div&gt;
            &lt;div class=&quot;form-row&quot; style=&quot;margin-top: 10px;&quot;&gt;
                &lt;div id=&quot;oob-target-1&quot; class=&quot;result-box&quot; style=&quot;flex: 1;&quot;&gt;OOB Target 1&lt;/div&gt;
                &lt;div id=&quot;oob-target-2&quot; class=&quot;result-box&quot; style=&quot;flex: 1;&quot;&gt;OOB Target 2&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Error Simulation --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;Error Simulation&lt;/h2&gt;
            &lt;p&gt;Test error handling&lt;/p&gt;
            
            &lt;div class=&quot;form-row&quot;&gt;
                &lt;button class=&quot;debug-btn danger&quot;
                        hx-get=&quot;/Debug?handler=Error&amp;statusCode=400&quot;
                        hx-target=&quot;#error-result&quot;&gt;
                    Trigger 400
                &lt;/button&gt;
                &lt;button class=&quot;debug-btn danger&quot;
                        hx-get=&quot;/Debug?handler=Error&amp;statusCode=404&quot;
                        hx-target=&quot;#error-result&quot;&gt;
                    Trigger 404
                &lt;/button&gt;
                &lt;button class=&quot;debug-btn danger&quot;
                        hx-get=&quot;/Debug?handler=Error&amp;statusCode=500&quot;
                        hx-target=&quot;#error-result&quot;&gt;
                    Trigger 500
                &lt;/button&gt;
            &lt;/div&gt;
            &lt;div id=&quot;error-result&quot; class=&quot;result-box&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- htmx Config Display --&gt;
        &lt;div class=&quot;debug-section&quot;&gt;
            &lt;h2&gt;htmx Configuration&lt;/h2&gt;
            &lt;p&gt;Current htmx settings&lt;/p&gt;
            
            &lt;div class=&quot;config-display&quot; id=&quot;htmx-config&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;form-row&quot; style=&quot;margin-top: 10px;&quot;&gt;
                &lt;button class=&quot;debug-btn secondary&quot; onclick=&quot;refreshConfig()&quot;&gt;
                    Refresh Config
                &lt;/button&gt;
                &lt;button class=&quot;debug-btn secondary&quot; onclick=&quot;htmx.logAll(); alert('Logging enabled. Check console.')&quot;&gt;
                    Enable logAll()
                &lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- Event Log --&gt;
    &lt;div class=&quot;debug-section&quot;&gt;
        &lt;h2&gt;Event Log&lt;/h2&gt;
        &lt;p&gt;Real-time htmx event monitoring&lt;/p&gt;
        
        &lt;div class=&quot;form-row&quot;&gt;
            &lt;button class=&quot;debug-btn secondary&quot; onclick=&quot;clearEventLog()&quot;&gt;Clear Log&lt;/button&gt;
            &lt;label&gt;
                &lt;input type=&quot;checkbox&quot; id=&quot;log-all-events&quot; checked onchange=&quot;toggleEventLogging(this.checked)&quot; /&gt;
                Log all events
            &lt;/label&gt;
        &lt;/div&gt;
        &lt;div id=&quot;event-log&quot; class=&quot;event-log&quot;&gt;
            &lt;div class=&quot;event&quot;&gt;Event log started...&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

@section Scripts {
    &lt;script&gt;
        // Display htmx config
        function refreshConfig() {
            const configDisplay = document.getElementById('htmx-config');
            configDisplay.textContent = JSON.stringify(htmx.config, null, 2);
        }
        refreshConfig();

        // Event logging
        const eventLog = document.getElementById('event-log');
        let loggingEnabled = true;

        function logEvent(name, detail, className) {
            if (!loggingEnabled) return;
            
            const entry = document.createElement('div');
            entry.className = 'event ' + className;
            
            const time = new Date().toLocaleTimeString('en-US', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                fractionalSecondDigits: 3 
            });
            
            let info = '';
            if (detail.path) info += ` path=${detail.path}`;
            if (detail.target?.id) info += ` target=#${detail.target.id}`;
            if (detail.xhr?.status) info += ` status=${detail.xhr.status}`;
            if (detail.successful !== undefined) info += ` success=${detail.successful}`;
            
            entry.textContent = `[${time}] ${name}${info}`;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
        }

        function clearEventLog() {
            eventLog.innerHTML = '&lt;div class=&quot;event&quot;&gt;Log cleared...&lt;/div&gt;';
        }

        function toggleEventLogging(enabled) {
            loggingEnabled = enabled;
            logEvent(enabled ? 'Logging enabled' : 'Logging disabled', {}, '');
        }

        // htmx event listeners
        const events = [
            { name: 'htmx:configRequest', class: 'event-request' },
            { name: 'htmx:beforeRequest', class: 'event-request' },
            { name: 'htmx:afterRequest', class: 'event-response' },
            { name: 'htmx:beforeSwap', class: 'event-swap' },
            { name: 'htmx:afterSwap', class: 'event-swap' },
            { name: 'htmx:responseError', class: 'event-error' },
            { name: 'htmx:sendError', class: 'event-error' },
            { name: 'htmx:timeout', class: 'event-error' },
        ];

        events.forEach(({ name, class: className }) =&gt; {
            document.body.addEventListener(name, (e) =&gt; {
                logEvent(name, e.detail, className);
            });
        });

        // Log OOB events
        document.body.addEventListener('htmx:oobAfterSwap', (e) =&gt; {
            logEvent('htmx:oobAfterSwap', { target: e.detail.target }, 'event-swap');
        });
    &lt;/script&gt;
}</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="218-production-debugging-considerations">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#218-production-debugging-considerations">#</doc-anchor-trigger>
        <span>21.8 Production Debugging Considerations</span>
    </h2>
</doc-anchor-target>
<p>Development debugging with browser DevTools and <code v-pre>console.log</code> doesn&#x27;t work in production. You need logging, error reporting, and diagnostic tools that work without direct browser access.</p>
<doc-anchor-target id="2181-error-logging-for-htmx-requests">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2181-error-logging-for-htmx-requests">#</doc-anchor-trigger>
        <span>21.8.1 Error Logging for htmx Requests</span>
    </h3>
</doc-anchor-target>
<p>Production errors need structured logging that captures context without exposing sensitive data.</p>
<p><strong>Middleware/HtmxErrorLoggingMiddleware.cs</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">using System.Diagnostics;

namespace ChinookDashboard.Middleware;

public class HtmxErrorLoggingMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger&lt;HtmxErrorLoggingMiddleware&gt; _logger;

    public HtmxErrorLoggingMiddleware(RequestDelegate next, ILogger&lt;HtmxErrorLoggingMiddleware&gt; logger)
    {
        _next = next;
        _logger = logger;
    }

    public async Task InvokeAsync(HttpContext context)
    {
        // Only process htmx requests
        if (!context.Request.Headers.ContainsKey(&quot;HX-Request&quot;))
        {
            await _next(context);
            return;
        }

        var requestId = Activity.Current?.Id ?? context.TraceIdentifier;
        var stopwatch = Stopwatch.StartNew();

        // Capture request details before processing
        var requestDetails = new HtmxRequestDetails
        {
            RequestId = requestId,
            Method = context.Request.Method,
            Path = context.Request.Path.ToString(),
            QueryString = SanitizeQueryString(context.Request.QueryString.ToString()),
            Target = context.Request.Headers[&quot;HX-Target&quot;].FirstOrDefault(),
            Trigger = context.Request.Headers[&quot;HX-Trigger&quot;].FirstOrDefault(),
            CurrentUrl = context.Request.Headers[&quot;HX-Current-URL&quot;].FirstOrDefault(),
            UserAgent = context.Request.Headers[&quot;User-Agent&quot;].FirstOrDefault()?[..Math.Min(100, context.Request.Headers[&quot;User-Agent&quot;].FirstOrDefault()?.Length ?? 0)]
        };

        try
        {
            await _next(context);

            stopwatch.Stop();

            // Log 4xx and 5xx responses
            if (context.Response.StatusCode &gt;= 400)
            {
                _logger.LogWarning(
                    &quot;htmx request failed | RequestId: {RequestId} | Status: {StatusCode} | &quot; +
                    &quot;Method: {Method} | Path: {Path} | Target: {Target} | Duration: {Duration}ms&quot;,
                    requestDetails.RequestId,
                    context.Response.StatusCode,
                    requestDetails.Method,
                    requestDetails.Path,
                    requestDetails.Target ?? &quot;(none)&quot;,
                    stopwatch.ElapsedMilliseconds
                );
            }
        }
        catch (Exception ex)
        {
            stopwatch.Stop();

            // Log exceptions with full context
            _logger.LogError(ex,
                &quot;htmx request exception | RequestId: {RequestId} | Method: {Method} | &quot; +
                &quot;Path: {Path} | Target: {Target} | Trigger: {Trigger} | Duration: {Duration}ms&quot;,
                requestDetails.RequestId,
                requestDetails.Method,
                requestDetails.Path,
                requestDetails.Target ?? &quot;(none)&quot;,
                requestDetails.Trigger ?? &quot;(none)&quot;,
                stopwatch.ElapsedMilliseconds
            );

            throw;
        }
    }

    private static string SanitizeQueryString(string queryString)
    {
        // Remove potentially sensitive parameters
        var sensitiveParams = new[] { &quot;password&quot;, &quot;token&quot;, &quot;key&quot;, &quot;secret&quot;, &quot;auth&quot; };
        
        if (string.IsNullOrEmpty(queryString)) return queryString;

        foreach (var param in sensitiveParams)
        {
            // Simple replacement - in production, use proper query string parsing
            queryString = System.Text.RegularExpressions.Regex.Replace(
                queryString,
                $@&quot;({param}=)[^&amp;]*&quot;,
                &quot;$1[REDACTED]&quot;,
                System.Text.RegularExpressions.RegexOptions.IgnoreCase
            );
        }

        return queryString;
    }

    private class HtmxRequestDetails
    {
        public string RequestId { get; set; } = &quot;&quot;;
        public string Method { get; set; } = &quot;&quot;;
        public string Path { get; set; } = &quot;&quot;;
        public string QueryString { get; set; } = &quot;&quot;;
        public string? Target { get; set; }
        public string? Trigger { get; set; }
        public string? CurrentUrl { get; set; }
        public string? UserAgent { get; set; }
    }
}

public static class HtmxErrorLoggingMiddlewareExtensions
{
    public static IApplicationBuilder UseHtmxErrorLogging(this IApplicationBuilder builder)
    {
        return builder.UseMiddleware&lt;HtmxErrorLoggingMiddleware&gt;();
    }
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="integration-with-serilog">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#integration-with-serilog">#</doc-anchor-trigger>
        <span>Integration with Serilog</span>
    </h4>
</doc-anchor-target>
<p>For structured logging with Serilog, the above middleware works as-is. Configure Serilog in <code v-pre>Program.cs</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">using Serilog;

Log.Logger = new LoggerConfiguration()
    .MinimumLevel.Information()
    .MinimumLevel.Override(&quot;Microsoft.AspNetCore&quot;, LogEventLevel.Warning)
    .Enrich.FromLogContext()
    .Enrich.WithProperty(&quot;Application&quot;, &quot;ChinookDashboard&quot;)
    .WriteTo.Console()
    .WriteTo.File(&quot;logs/htmx-.log&quot;, 
        rollingInterval: RollingInterval.Day,
        outputTemplate: &quot;{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u3}] {Message:lj}{NewLine}{Exception}&quot;)
    .CreateLogger();

builder.Host.UseSerilog();</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2182-client-side-error-reporting">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2182-client-side-error-reporting">#</doc-anchor-trigger>
        <span>21.8.2 Client-Side Error Reporting</span>
    </h3>
</doc-anchor-target>
<p>Capture client-side errors and send them to the server for logging.</p>
<p><strong>wwwroot/js/error-reporting.js</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-javascript"><code v-pre class="language-javascript">(function() {
    'use strict';

    // Configuration
    const config = {
        endpoint: '/api/client-errors',
        maxErrorsPerMinute: 10,
        includeStack: false, // Don't send stack traces in production
        sessionId: generateSessionId()
    };

    // Rate limiting
    let errorCount = 0;
    setInterval(() =&gt; { errorCount = 0; }, 60000);

    function generateSessionId() {
        return 'sess_' + Math.random().toString(36).substring(2, 15);
    }

    function shouldReport() {
        errorCount++;
        return errorCount &lt;= config.maxErrorsPerMinute;
    }

    function sanitizeUrl(url) {
        if (!url) return url;
        try {
            const parsed = new URL(url, window.location.origin);
            // Remove sensitive query parameters
            ['token', 'key', 'password', 'auth', 'secret'].forEach(param =&gt; {
                if (parsed.searchParams.has(param)) {
                    parsed.searchParams.set(param, '[REDACTED]');
                }
            });
            return parsed.pathname + parsed.search;
        } catch {
            return url;
        }
    }

    function reportError(errorData) {
        if (!shouldReport()) {
            console.warn('Error reporting rate limited');
            return;
        }

        // Sanitize data before sending
        const sanitizedData = {
            type: errorData.type,
            message: errorData.message?.substring(0, 500), // Limit message length
            path: sanitizeUrl(errorData.path),
            target: errorData.target,
            status: errorData.status,
            timestamp: new Date().toISOString(),
            sessionId: config.sessionId,
            pageUrl: sanitizeUrl(window.location.href),
            userAgent: navigator.userAgent.substring(0, 200)
        };

        // Send via beacon (doesn't block page unload)
        if (navigator.sendBeacon) {
            navigator.sendBeacon(config.endpoint, JSON.stringify(sanitizedData));
        } else {
            // Fallback to fetch
            fetch(config.endpoint, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(sanitizedData),
                keepalive: true
            }).catch(() =&gt; {}); // Ignore send failures
        }
    }

    // htmx error handling
    document.body.addEventListener('htmx:responseError', function(event) {
        reportError({
            type: 'htmx:responseError',
            message: `HTTP ${event.detail.xhr?.status}: ${event.detail.xhr?.statusText}`,
            path: event.detail.pathInfo?.requestPath,
            target: event.detail.target?.id,
            status: event.detail.xhr?.status
        });
    });

    document.body.addEventListener('htmx:sendError', function(event) {
        reportError({
            type: 'htmx:sendError',
            message: 'Network request failed',
            path: event.detail.pathInfo?.requestPath,
            target: event.detail.target?.id
        });
    });

    document.body.addEventListener('htmx:timeout', function(event) {
        reportError({
            type: 'htmx:timeout',
            message: 'Request timed out',
            path: event.detail.pathInfo?.requestPath,
            target: event.detail.target?.id
        });
    });

    // Expose for manual error reporting
    window.reportClientError = reportError;
})();</code></pre>
</doc-codeblock></div>
<p><strong>API Endpoint for Receiving Errors</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">// In a minimal API or controller
app.MapPost(&quot;/api/client-errors&quot;, async (
    HttpContext context,
    ILogger&lt;Program&gt; logger) =&gt;
{
    try
    {
        using var reader = new StreamReader(context.Request.Body);
        var body = await reader.ReadToEndAsync();
        
        // Parse and validate
        var error = JsonSerializer.Deserialize&lt;ClientErrorReport&gt;(body);
        if (error == null) return Results.BadRequest();

        // Log with structured data
        logger.LogWarning(
            &quot;Client-side error | Type: {Type} | Message: {Message} | Path: {Path} | &quot; +
            &quot;Status: {Status} | SessionId: {SessionId}&quot;,
            error.Type,
            error.Message,
            error.Path,
            error.Status,
            error.SessionId
        );

        return Results.Ok();
    }
    catch
    {
        return Results.BadRequest();
    }
});

public record ClientErrorReport(
    string Type,
    string? Message,
    string? Path,
    string? Target,
    int? Status,
    string? Timestamp,
    string? SessionId,
    string? PageUrl,
    string? UserAgent
);</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2183-feature-flags-for-debug-mode">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2183-feature-flags-for-debug-mode">#</doc-anchor-trigger>
        <span>21.8.3 Feature Flags for Debug Mode</span>
    </h3>
</doc-anchor-target>
<p>Control debug features based on environment and configuration.</p>
<p><strong>Program.cs</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-csharp"><code v-pre class="language-csharp">var builder = WebApplication.CreateBuilder(args);

// Add services
builder.Services.AddRazorPages();

// Add feature flags for debugging
builder.Services.Configure&lt;DebugOptions&gt;(
    builder.Configuration.GetSection(&quot;Debug&quot;));

var app = builder.Build();

// Environment-specific middleware
if (app.Environment.IsDevelopment())
{
    app.UseDeveloperExceptionPage();
    app.UseHtmxLogging(); // Verbose logging in development
    
    // Map debug endpoints only in development
    app.MapRazorPages();
}
else
{
    app.UseExceptionHandler(&quot;/Error&quot;);
    app.UseHsts();
    app.UseHtmxErrorLogging(); // Error-only logging in production
    
    // Exclude debug pages in production
    app.MapRazorPages().RequireAuthorization();
}

// Configuration class
public class DebugOptions
{
    public bool EnableClientLogging { get; set; }
    public bool EnableVerboseErrors { get; set; }
    public bool EnablePerformanceMetrics { get; set; }
}</code></pre>
</doc-codeblock></div>
<p><strong>Conditional htmx.logAll() in Layout</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-markup"><code v-pre class="language-markup">@inject IWebHostEnvironment Environment
@inject IOptions&lt;DebugOptions&gt; DebugOptions

&lt;!-- htmx --&gt;
&lt;script src=&quot;~/lib/htmx/htmx.min.js&quot;&gt;&lt;/script&gt;

@if (Environment.IsDevelopment())
{
    &lt;script&gt;
        // Full debug mode in development
        htmx.logAll();
        console.log('%c[htmx] Debug mode enabled', 'color: #3b82f6; font-weight: bold;');
    &lt;/script&gt;
}
else if (DebugOptions.Value.EnableClientLogging)
{
    &lt;script&gt;
        // Limited logging in production when enabled via config
        document.body.addEventListener('htmx:responseError', function(e) {
            console.error('htmx error:', e.detail.xhr?.status, e.detail.pathInfo?.requestPath);
        });
    &lt;/script&gt;
}

@if (Environment.IsDevelopment() || DebugOptions.Value.EnablePerformanceMetrics)
{
    &lt;script&gt;
        // Performance timing
        document.body.addEventListener('htmx:afterRequest', function(e) {
            const duration = e.detail.xhr?.getResponseHeader('X-Request-Duration');
            if (duration) {
                console.log(`[htmx] ${e.detail.pathInfo?.requestPath}: ${duration}ms`);
            }
        });
    &lt;/script&gt;
}</code></pre>
</doc-codeblock></div>
<p><strong>appsettings.Production.json</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-json"><code v-pre class="language-json">{
  &quot;Debug&quot;: {
    &quot;EnableClientLogging&quot;: false,
    &quot;EnableVerboseErrors&quot;: false,
    &quot;EnablePerformanceMetrics&quot;: false
  }
}</code></pre>
</doc-codeblock></div>
<p><strong>appsettings.Development.json</strong></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-json"><code v-pre class="language-json">{
  &quot;Debug&quot;: {
    &quot;EnableClientLogging&quot;: true,
    &quot;EnableVerboseErrors&quot;: true,
    &quot;EnablePerformanceMetrics&quot;: true
  }
}</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="219-summary">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#219-summary">#</doc-anchor-trigger>
        <span>21.9 Summary</span>
    </h2>
</doc-anchor-target>
<p>Debugging htmx applications requires understanding both client-side and server-side behavior. The techniques in this chapter provide a systematic approach to finding and fixing issues.</p>
<doc-anchor-target id="key-debugging-tools">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#key-debugging-tools">#</doc-anchor-trigger>
        <span>Key Debugging Tools</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Tool</th>
<th>Purpose</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Browser Network Tab</strong></td>
<td>Inspect requests and responses</td>
<td>Always start here for htmx issues</td>
</tr>
<tr>
<td><strong>Browser Console</strong></td>
<td>View errors, run htmx.logAll()</td>
<td>JavaScript errors, event tracing</td>
</tr>
<tr>
<td><strong>Browser Elements Tab</strong></td>
<td>Inspect DOM and htmx attributes</td>
<td>Target issues, attribute verification</td>
</tr>
<tr>
<td><strong>Server Logs</strong></td>
<td>Track server-side processing</td>
<td>Handler execution, database issues</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="essential-htmx-debug-methods">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#essential-htmx-debug-methods">#</doc-anchor-trigger>
        <span>Essential htmx Debug Methods</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Method/Event</th>
<th>Purpose</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>htmx.logAll()</code></td>
<td>Log all htmx events</td>
<td>Development debugging</td>
</tr>
<tr>
<td><code v-pre>htmx.config</code></td>
<td>View/modify htmx settings</td>
<td>Configuration issues</td>
</tr>
<tr>
<td><code v-pre>htmx:responseError</code></td>
<td>Handle server errors</td>
<td>Global error handling</td>
</tr>
<tr>
<td><code v-pre>htmx:configRequest</code></td>
<td>Inspect/modify requests</td>
<td>Request debugging, token injection</td>
</tr>
<tr>
<td><code v-pre>htmx:afterSwap</code></td>
<td>Post-swap processing</td>
<td>Verify swaps completed</td>
</tr>
<tr>
<td><code v-pre>htmx:oobAfterSwap</code></td>
<td>OOB swap completion</td>
<td>Debug OOB updates</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="the-systematic-debugging-approach">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#the-systematic-debugging-approach">#</doc-anchor-trigger>
        <span>The Systematic Debugging Approach</span>
    </h3>
</doc-anchor-target>
<ol>
<li><strong>Reproduce</strong> - Document exact steps to trigger the bug</li>
<li><strong>Isolate</strong> - Determine if issue is client, network, or server</li>
<li><strong>Gather</strong> - Collect evidence from appropriate tools</li>
<li><strong>Hypothesize</strong> - Form specific theory about root cause</li>
<li><strong>Verify</strong> - Test fix and check for regressions</li>
</ol>
<doc-anchor-target id="common-issues-quick-reference">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#common-issues-quick-reference">#</doc-anchor-trigger>
        <span>Common Issues Quick Reference</span>
    </h3>
</doc-anchor-target>
<div class="table-wrapper scrollbar overflow-hidden">
<table class="comfortable">
<thead>
<tr>
<th>Symptom</th>
<th>Likely Cause</th>
<th>Debug Focus</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nothing happens on click</td>
<td>htmx not loaded, JS error, no trigger</td>
<td>Console errors, Network tab</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>Anti-forgery token missing</td>
<td>Request headers, token config</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>Wrong handler name, typo</td>
<td>URL in Network tab</td>
</tr>
<tr>
<td>Content in wrong place</td>
<td>Wrong hx-target selector</td>
<td>Target element existence</td>
</tr>
<tr>
<td>Duplicate ID issues</td>
<td>Non-unique IDs in loop</td>
<td>Elements tab search</td>
</tr>
<tr>
<td>OOB not updating</td>
<td>Target ID mismatch</td>
<td>Response HTML, DOM IDs</td>
</tr>
<tr>
<td>Form data missing</td>
<td>Button outside form</td>
<td>hx-include, form structure</td>
</tr>
<tr>
<td>Old data after save</td>
<td>Target changed by edit</td>
<td>ID consistency</td>
</tr>
<tr>
<td>Back button stale</td>
<td>Missing hx-push-url</td>
<td>History events</td>
</tr>
<tr>
<td>Hyperscript silent fail</td>
<td>Syntax error</td>
<td>_hyperscript.config.debug</td>
</tr>
</tbody>
</table>
</div>
<doc-anchor-target id="companion-code-files">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#companion-code-files">#</doc-anchor-trigger>
        <span>Companion Code Files</span>
    </h3>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-none"><code v-pre class="language-none">chap21/
â”œâ”€â”€ ChinookDashboard/
â”‚   â”œâ”€â”€ Middleware/
â”‚   â”‚   â”œâ”€â”€ HtmxLoggingMiddleware.cs
â”‚   â”‚   â””â”€â”€ HtmxErrorLoggingMiddleware.cs
â”‚   â”œâ”€â”€ Extensions/
â”‚   â”‚   â””â”€â”€ PartialResultExtensions.cs
â”‚   â”œâ”€â”€ Pages/
â”‚   â”‚   â””â”€â”€ Debug/
â”‚   â”‚       â”œâ”€â”€ Index.cshtml
â”‚   â”‚       â””â”€â”€ Index.cshtml.cs
â”‚   â””â”€â”€ wwwroot/
â”‚       â””â”€â”€ js/
â”‚           â”œâ”€â”€ htmx-debug.js
â”‚           â””â”€â”€ error-reporting.js
â””â”€â”€ README.md</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="whats-next">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#whats-next">#</doc-anchor-trigger>
        <span>What&#x27;s Next</span>
    </h3>
</doc-anchor-target>
<p>Chapter 23 covers testing strategies for htmx applications. You&#x27;ll learn to write integration tests that verify htmx interactions, test partial responses, and automate the verification of complex multi-step workflows. The debugging skills from this chapter form the foundation for understanding what to test and how to verify correct behavior.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer id="retype-content-footer" class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a id="retype-edit-this-page" class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-body-link font-body-link-weight hover:text-body-link-hover hover:underline" href="https://github.com/cwoodruff/book-aspnet-htmx/blob/main/Chapter21/chapter21.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav id="retype-nextprev" class="print:hidden flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../chapter20/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-base-text-muted">Previous</span>
                                                <span class="block mt-1">Chap 20 - htmx Performance Optimization</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../chapter22/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-base-text-muted">Next</span>
                                                <span class="block mt-1">Chap 22 - Testing htmx Applications</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div id="retype-page-footer" class="print:border-none border-t border-base-border pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between print:justify-center">
                                <div id="retype-footer-links" class="print:hidden">
                                    <ul class="flex flex-wrap items-center text-sm">
                                        <li>
                                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="../copyright/">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                    <g fill="currentColor">
                                                        <path d="M10.97 8.265a1.45 1.45 0 0 0-.487.57.75.75 0 0 1-1.341-.67c.2-.402.513-.826.997-1.148C10.627 6.69 11.244 6.5 12 6.5c.658 0 1.369.195 1.934.619a2.45 2.45 0 0 1 1.004 2.006c0 1.033-.513 1.72-1.027 2.215-.19.183-.399.358-.579.508l-.147.123a4.329 4.329 0 0 0-.435.409v1.37a.75.75 0 1 1-1.5 0v-1.473c0-.237.067-.504.247-.736.22-.28.486-.517.718-.714l.183-.153.001-.001c.172-.143.324-.27.47-.412.368-.355.569-.676.569-1.136a.953.953 0 0 0-.404-.806C12.766 8.118 12.384 8 12 8c-.494 0-.814.121-1.03.265ZM13 17a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"/>
                                                    </g>
                                                </svg>
                                                <span>Copyright</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="../license/">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                    <g fill="currentColor">
                                                        <path d="M16.53 9.78a.75.75 0 0 0-1.06-1.06L11 13.19l-1.97-1.97a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l5-5Z"/><path d="m12.54.637 8.25 2.675A1.75 1.75 0 0 1 22 4.976V10c0 6.19-3.771 10.704-9.401 12.83a1.704 1.704 0 0 1-1.198 0C5.77 20.705 2 16.19 2 10V4.976c0-.758.489-1.43 1.21-1.664L11.46.637a1.748 1.748 0 0 1 1.08 0Zm-.617 1.426-8.25 2.676a.249.249 0 0 0-.173.237V10c0 5.46 3.28 9.483 8.43 11.426a.199.199 0 0 0 .14 0C17.22 19.483 20.5 15.461 20.5 10V4.976a.25.25 0 0 0-.173-.237l-8.25-2.676a.253.253 0 0 0-.154 0Z"/>
                                                    </g>
                                                </svg>
                                                <span>License</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="retype-copyright" class="print:justify-center py-2 text-footer-text font-footer-link-weight text-sm leading-relaxed"><p>Â© Copyright 2026. All rights reserved Chris Woodruff.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-sidebar-right-bg border-sidebar-right-border lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="retype-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Chap 21 - Debugging htmx Applications", level: 1, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
